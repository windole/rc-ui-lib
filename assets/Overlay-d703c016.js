import{j as x,c as y}from"./locales-548059eb.js";import{r as d}from"./react-libs-840bfe49.js";import{u as E}from"./use-touch-76dedc34.js";import{g as L}from"./use-scroll-parent-a4dd715d.js";import{C as S}from"./ConfigProviderContext-0f984393.js";import{C as O}from"./CSSTransition-ea203202.js";import{i as k}from"./base-1da74170.js";let s=0;const C="rc-overflow-hidden";function b(t,c){const o=E(),i=e=>{o.move(e);const f=o.deltaY.current>0?"10":"01",a=L(e.target,t.current);if(!a)return;const{scrollHeight:l,offsetHeight:r,scrollTop:v}=a;let u="11";v===0?u=r>=l?"00":"01":v+r>=l&&(u="10"),u!=="11"&&o.isVertical()&&!(parseInt(u,2)&parseInt(f,2))&&e.cancelable&&e.preventDefault()},n=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",i,!1),s||document.body.classList.add(C),s++},m=()=>{s&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",i),s--,s||document.body.classList.remove(C))};d.useEffect(()=>{if(c)return n(),()=>{m()}},[c])}const h=t=>{const{prefixCls:c,createNamespace:o}=d.useContext(S),[i]=o("overlay",c),n=d.useRef(null);b(n,t.visible&&t.lockScroll);const{visible:m,duration:e,customStyle:f,children:a}=t,l=()=>{const r={zIndex:t.zIndex!==void 0?+t.zIndex:void 0,...t.style,...f};return k(e)&&(r.animationDuration=`${e}ms`),x.jsx("div",{ref:n,style:r,onClick:t.onClick,className:y(i(),t.className),children:a})};return x.jsx(O,{nodeRef:n,mountOnEnter:!0,unmountOnExit:!0,in:m,timeout:e,classNames:"rc-fade",children:l()})};h.defaultProps={lockScroll:!0,duration:300};const z=h;export{z as O,b as u};
