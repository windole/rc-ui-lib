import{j as t,c as C}from"./locales-548059eb.js";import{c as $}from"./rc-cli_site-mobile-demo-eaa39090.js";import{r as s,R as E}from"./react-libs-840bfe49.js";import{a as B}from"./constant-7552c2aa.js";import{C as N}from"./ConfigProviderContext-0f984393.js";import{u as k}from"./use-update-effect-09c1ca0c.js";import{C as L}from"./index-9549eced.js";import{r as M,d as w}from"./raf-f0838b14.js";import{a as D}from"./index-59db7e48.js";import"./mobile-e0307386.js";import"./base-1da74170.js";import"./unit-bb3e6514.js";const H=s.createContext({}),V=H,S=e=>{const{prefixCls:a,createNamespace:u}=s.useContext(N),[c]=u("collapse",a),f=s.useRef(!1),[o,d]=s.useState(()=>e.value??e.initValue),i=n=>{var r;f.current=!0,d(n),(r=e.onChange)==null||r.call(e,n)},x=(n,r)=>{const{accordion:b}=e;i(b?n===o?"":n:r?o.concat(n):o.filter(I=>I!==n))},h=n=>{const{accordion:r}=e;return r?o===n:o.includes(n)};return k(()=>{if(f.current){f.current=!1;return}d(e.value)},[e.value]),t.jsx(V.Provider,{value:{isExpanded:h,toggle:x},children:t.jsx("div",{className:C(c(),{[B]:e.border}),children:E.Children.toArray(e.children).filter(Boolean).map((n,r)=>E.cloneElement(n,{index:r}))})})};S.defaultProps={border:!0,initValue:[]};const _=S;function z(e){const[a,u]=s.useState(!1);return s.useEffect(()=>{e&&u(e)},[e]),c=>()=>a?c():null}const R=s.forwardRef((e,a)=>{const{index:u}=e,c=s.useContext(V),{prefixCls:f,createNamespace:o}=s.useContext(N),[d]=o("collapse-item",f),i=s.useRef(null),x=s.useRef(null),h=s.useMemo(()=>e.name??u,[e.name]),n=s.useMemo(()=>c?c.isExpanded(h):null,[c,h]),[r,b]=s.useState(()=>n),I=z(r),v=()=>{n?i.current.style.height="":b(!1)};k(()=>{n&&b(!0),M(()=>{if(!x.current||!i.current)return;const{offsetHeight:m}=x.current;if(m){const j=`${m}px`;i.current.style.height=n?0:j,w(()=>{i.current.style.height=n?j:0})}else v()})},[n]);const p=(m=!n)=>{c.toggle(h,m)},T=()=>{!e.disabled&&!e.readonly&&p()},O=()=>{const{border:m,disabled:j,children:U,readonly:y,...g}=e;return t.jsx(L,{className:C(d("title",{disabled:j,expanded:n,borderless:!m})),"aria-expanded":String(n),onClick:T,...g,isLink:y?!1:g.isLink,clickable:j||y?!1:g.clickable})},P=I(()=>t.jsx("div",{ref:i,className:C(d("wrapper")),onTransitionEnd:v,children:t.jsx("div",{ref:x,className:C(d("content")),children:e.children})}));return s.useImperativeHandle(a,()=>({toggle:p})),t.jsxs("div",{className:C(d({border:u&&e.border})),children:[O(),P()]})});R.defaultProps={isLink:!0,border:!0};R.displayName="CollapseItem";const q=R,A=Object.assign(_,{Item:q}),l=A;const se=()=>{const{DemoBlock:e,DemoSection:a}=$;return t.jsxs(a,{children:[t.jsx(e,{title:"基础用法",children:t.jsxs(l,{initValue:["1"],children:[t.jsx(l.Item,{title:"标题1",name:"1",children:"代码是写出来给人看的，附带能在机器上运行"}),t.jsx(l.Item,{title:"标题2",name:"2",children:"代码是写出来给人看的，附带能在机器上运行"}),t.jsx(l.Item,{title:"标题3",name:"3",children:"代码是写出来给人看的，附带能在机器上运行"})]})}),t.jsx(e,{title:"手风琴",children:t.jsxs(l,{initValue:"1",accordion:!0,children:[t.jsx(l.Item,{title:t.jsxs("div",{children:["标题1 ",t.jsx(D,{name:"question-o"})]}),name:"1",children:"代码是写出来给人看的，附带能在机器上运行"}),t.jsx(l.Item,{title:"标题2",name:"2",children:"代码是写出来给人看的，附带能在机器上运行"}),t.jsx(l.Item,{title:"标题3",name:"3",children:"代码是写出来给人看的，附带能在机器上运行"})]})}),t.jsx(e,{initValue:[],title:"禁用状态",children:t.jsxs(l,{children:[t.jsx(l.Item,{title:"标题1",name:"1",children:"代码是写出来给人看的，附带能在机器上运行"}),t.jsx(l.Item,{title:"标题2",name:"2",readonly:!0,children:"代码是写出来给人看的，附带能在机器上运行"}),t.jsx(l.Item,{title:"标题3",name:"3",disabled:!0,children:"代码是写出来给人看的，附带能在机器上运行"})]})})]})};export{se as default};
