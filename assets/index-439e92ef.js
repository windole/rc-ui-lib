import{j as l,c as y}from"./locales-548059eb.js";import{R as E,r as o}from"./react-libs-840bfe49.js";import{u as p}from"./use-refs-92151253.js";import{u as ye}from"./use-scroll-parent-a4dd715d.js";import{u as _}from"./use-event-listener-721bbec6.js";import{a as ee,i as q}from"./base-1da74170.js";import{S as ve,i as we}from"./Sticky-3cb62dae.js";import{B as Re}from"./index-59db7e48.js";import{C as V}from"./ConfigProviderContext-0f984393.js";import{S as te}from"./index-945c9dff.js";import{c as Se}from"./interceptor-35467a90.js";import{a as Ie}from"./constant-7552c2aa.js";import{P as Ne}from"./PopupContext-0557b73d.js";import{a as ke,b as je,c as ne,d as He,e as Ee,f as Be}from"./scroll-e4e20d56.js";import{u as Pe}from"./use-set-state-898f20ed.js";import{u as H}from"./use-update-effect-09c1ca0c.js";import{u as Me,a as oe}from"./unit-bb3e6514.js";function Ae(e){return E.Children.toArray(e).map(r=>E.isValidElement(r)?{key:r.key!==void 0?String(r.key):void 0,...r.props,node:r}:null).filter(r=>r)}function We(){const[e,r]=o.useState(ee?window.innerWidth:0),[s,C]=o.useState(ee?window.innerHeight:0),u=()=>{r(window.innerWidth),C(window.innerHeight)};return _("resize",u),_("orientationchange",u),{width:e,height:s}}const re=o.forwardRef((e,r)=>{const{prefixCls:s,createNamespace:C}=o.useContext(V),[u]=C("tab",s),{type:a,color:d,isActive:f,activeColor:v,inactiveColor:b,disabled:T,className:g}=e,m=o.useMemo(()=>{const h={};d&&a==="card"&&(h.borderColor=d,T||(f?h.backgroundColor=d:h.color=d));const w=f?v:b;return w&&(h.color=w),h},[a,d,T,f,v,b]),I=()=>{const h=l.jsx("span",{className:y(u("text",{ellipsis:!e.scrollable})),children:(()=>typeof e.renderTitle=="function"?e.renderTitle(f):e.renderTitle||e.title)()});return e.dot||q(e.badge)&&e.badge!==""?l.jsx(Re,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge,children:h}):h};return l.jsx("div",{ref:r,className:y([u({active:e.isActive,disabled:e.disabled}),g]),style:m,"aria-selected":e.isActive,onClick:e.onClick,children:I()})});re.defaultProps={showZeroBadge:!0};const ze=re,Le=e=>{const{prefixCls:r,createNamespace:s}=o.useContext(V),[C]=s("tabs",r),u=o.useRef(),a=o.useRef(!1),{animated:d,swipeable:f,duration:v}=e,b=()=>d||f?l.jsx(te,{ref:u,loop:!1,autoplay:!1,allowTouchMove:f,className:y(C("track")),autoplayInterval:+v,indicator:!1,onIndexChange:g=>{var m;if(a.current){a.current=!1;return}(m=e.onChange)==null||m.call(e,g)},children:E.Children.map(e.children,g=>l.jsx(te.Item,{style:{cursor:f?void 0:"auto"},className:y(C("pane-wrapper")),children:g}))}):e.children,T=g=>{const m=u.current;m&&m.activeIndex!==g&&(a.current=!0,m.swipeTo(g))};return o.useEffect(()=>{T(e.currentIndex)},[e.currentIndex]),l.jsx("div",{className:y(C("content",{animated:d||f})),children:b()})},$e=Le,Oe=o.createContext({}),ce=Oe;function Ze(){let e=0,r=0,s=0;return document.body&&(r=document.body.scrollTop),document.documentElement&&(s=document.documentElement.scrollTop),e=r-s>0?r:s,e}function Ve(){let e=0,r=0,s=0;return document.body&&(r=document.body.scrollHeight),document.documentElement&&(s=document.documentElement.scrollHeight),e=r-s>0?r:s,e}function Fe(){let e=0;return document.compatMode==="CSS1Compat"?e=document.documentElement.clientHeight:e=document.body.clientHeight,e}function De(e=0){return Ze()+Fe()+e>=Ve()}const ie=o.forwardRef((e,r)=>{const{prefixCls:s,createNamespace:C}=o.useContext(V),u=o.useContext(Ne),[a]=C("tabs",s),{children:d,color:f,background:v}=e,b=o.useRef(null),[T,g]=o.useState(null),m=o.useRef(!1),I=o.useRef(!1),h=o.useRef(!1),B=o.useRef(null),w=ye(b),G=We(),[S,M]=p(),[F,le]=p(),J=o.useMemo(()=>T?ke(T):0,[T]),D=o.useRef(J);D.current=J;const[c,U]=Pe({inited:!1,position:"",currentIndex:-1,lineStyle:{backgroundColor:e.color}}),R=o.useMemo(()=>Ae(e.children),[e.children]),A=o.useMemo(()=>R.length>e.swipeThreshold||!e.ellipsis,[R.length,e.swipeThreshold,e.ellipsis]),ae=o.useMemo(()=>({borderColor:f,background:v}),[f,v]),W=(t,n)=>(t==null?void 0:t.name)??n,X=o.useMemo(()=>{const t=R[c.currentIndex];return t&&W(t,c.currentIndex)},[c.currentIndex]),z=o.useMemo(()=>Me(e.offsetTop),[e.offsetTop]),L=t=>{const n=B.current;if(!A||!n||!S||!S[c.currentIndex])return;const i=S[c.currentIndex],x=i.offsetLeft-(n.offsetWidth-i.offsetWidth)/2;He(n,x,t?0:+e.duration)},N=t=>{let n=c.inited;t&&(n=!1);const i=S,x=we(b.current);if(!i||!i[c.currentIndex]||e.type!=="line"||x)return;const k=i[c.currentIndex],{lineWidth:j,lineHeight:P}=e,Te=k.offsetLeft+k.offsetWidth/2,Z={width:oe(j),backgroundColor:e.color,transform:`translateX(${Te}px) translateX(-50%)`};if(n&&(Z.transitionDuration=`${e.duration}ms`),q(P)){const Y=oe(P);Z.height=Y,Z.borderRadius=Y}U({lineStyle:Z})},de=t=>{const n=t<c.currentIndex?-1:1;for(;t>=0&&t<R.length;){if(!R[t].disabled)return t;t+=n}return null},$=t=>{var j;const n=de(t);if(!q(n))return;const i=R[n],x=W(i,n),k=c.currentIndex!==null;if(U({currentIndex:n}),!m.current){m.current=!0;return}m.current&&k&&((j=e.onChange)==null||j.call(e,x,i.title))},O=t=>{const n=R.findIndex((i,x)=>W(i,x)===t);$(n<0?0:n)},K=(t,n)=>{if(e.scrollspy){const i=F[n??c.currentIndex];if(i&&w){const x=ne(i,w)-(z+D.current);I.current=!0,Ee(w,x,t?0:+e.duration,()=>{I.current=!1})}}},ue=(t,n,i)=>{var P;const{title:x,disabled:k=!1}=t,j=W(t,n);(P=e.onClickTab)==null||P.call(e,{name:j,title:x,event:i,disabled:k}),!k&&Se({interceptor:e.beforeChange,args:[j],done:()=>{n!==c.currentIndex&&($(n),K(!1,n))}})},fe=t=>{O(t),K(!0)},me=()=>{const t=z+D.current;for(let n=0;n<F.length;n++){const i=F[n];if(Be(i)>t)return n===0?0:n-1}return S.length-1},he=()=>{if(e.scrollspy&&!I.current){let t=me();typeof e.scrollspy=="object"&&e.scrollspy.autoFocusLast&&De(e.scrollspy.reachBottomThreshold)&&(t=S.length-1),t!==c.currentIndex&&$(t)}},be=t=>{var n;h.current=t.isFixed,(n=e.onScroll)==null||n.call(e,t)},ge=()=>R.map((t,n)=>l.jsx(ze,{ref:M(n),dot:t.dot,type:e.type,badge:t.badge,title:t.title,color:e.color,style:t.titleStyle,className:t.titleClass,isActive:n===c.currentIndex,disabled:t.disabled,scrollable:A,renderTitle:t.renderTitle,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,showZeroBadge:t.showZeroBadge,onClick:i=>{ue(t,n,i)}},t.key)),Q=()=>{const{type:t,border:n}=e;return l.jsx("div",{ref:g,className:y([a("wrap",{scrollable:A}),{[Ie]:t==="line"&&n}]),children:l.jsxs("div",{ref:B,role:"tablist",className:y(a("nav",[t,{complete:A}])),style:ae,children:[e.navRight,ge(),t==="line"&&l.jsx("div",{className:y(a("line")),style:c.lineStyle}),e.navRight]})})};H(()=>{N()},[e.color,G.width]),H(()=>{e.active!==X&&O(e.active)},[e.active]),H(()=>{c.inited&&(O(e.active||X),N(),L(!0))},[E.Children.count(d)]),H(()=>{L(),N(),h.current&&!e.scrollspy&&je(Math.ceil(ne(b.current)-z))},[c.currentIndex]);const xe=()=>{O(e.active),L(!0),U({inited:!0})};o.useEffect(()=>{xe()},[]),H(()=>{u.visible&&N()},[u.visible]),_("scroll",he,{target:w,depends:[c.currentIndex]}),o.useImperativeHandle(r,()=>({resize:N,scrollTo:fe}));const Ce=()=>{N(!0)};return l.jsx(ce.Provider,{value:{props:e,currentName:X,scrollIntoView:L,setLine:N},children:l.jsxs("div",{ref:b,className:y(e.className,a([e.type])),children:[e.sticky?l.jsxs(ve,{container:b,offsetTop:z,onChange:Ce,onScroll:be,children:[Q(),e.navBottom]}):l.jsxs(l.Fragment,{children:[Q(),e.navBottom]}),l.jsx($e,{count:R.length,inited:c.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:c.currentIndex,onChange:$,children:E.Children.toArray(d).filter(Boolean).map((t,n)=>E.cloneElement(t,{index:n,ref:le(n)}))})]})})});ie.defaultProps={type:"line",duration:300,swipeThreshold:5,offsetTop:0,ellipsis:!0,lazyRender:!0,active:0};const Ue=ie,se=o.forwardRef((e,r)=>{const{prefixCls:s,createNamespace:C}=o.useContext(V),[u]=C("tab",s),a=o.useContext(ce),[d,f]=o.useState(!1),{animated:v,swipeable:b,scrollspy:T,lazyRender:g}=a.props,{index:m}=e,I=()=>e.name??m,h=()=>{f(!0)},B=o.useMemo(()=>{const M=I()===a.currentName;return M&&!d&&h(),M},[d,a.currentName]);H(()=>{a.setLine(),a.scrollIntoView()},[e.title]);const w=T||B;if(v||b)return l.jsx("div",{className:y(u("pane")),children:e.children});const S=d||T||!g?e.children:null;return l.jsx("div",{ref:r,style:{display:w?"block":"none"},role:"tabpanel",className:y(u("pane")),children:S})});se.defaultProps={showZeroBadge:!0};const Xe=se,_e=Object.assign(Ue,{TabPane:Xe}),dt=_e;export{dt as T,We as u};
