import{j as N,c as x}from"./locales-548059eb.js";import{r as i}from"./react-libs-840bfe49.js";import{u as F}from"./use-touch-76dedc34.js";import{g as V}from"./get-rect-4dc7f7e4.js";import{u as G}from"./usePassiveHandler-330dfdb1.js";import{C as L}from"./ConfigProviderContext-0f984393.js";import{s as Q}from"./event-07a78c2b.js";import{a as W,r as Z}from"./number-b57f7cd4.js";import{a as _,g as p}from"./unit-bb3e6514.js";const B=t=>{const{prefixCls:O,createNamespace:k}=i.useContext(L),[m]=k("slider",O),w=i.useRef(null),E=i.useRef(null),S=i.useRef(),o=i.useRef(),c=i.useRef(t.value),C=i.useRef(),s=i.useRef(),b=F(),d=i.useMemo(()=>Number(t.max)-Number(t.min),[t.max,t.min]),J=i.useMemo(()=>{const e=t.vertical?"width":"height";return{background:t.inactiveColor,[e]:_(t.barHeight),...t.style}},[t.vertical,t.barHeight,t.inactiveColor,t.style]),f=e=>t.range&&Array.isArray(e),$=()=>{const{value:e,min:n}=t;return f(e)?`${(e[1]-e[0])*100/d}%`:`${(+e-Number(n))*100/d}%`},A=()=>{const{value:e,min:n}=t;return f(e)?`${(e[0]-Number(n))*100/d}%`:"0%"},z=i.useMemo(()=>{const n={[t.vertical?"height":"width"]:$(),background:t.activeColor};s.current&&(n.transition="none");const r=()=>t.vertical?t.reverse?"bottom":"top":t.reverse?"right":"left";return n[r()]=A(),n},[A]),h=e=>{const n=+t.min,r=+t.max,a=+t.step;e=Z(e,n,r);const u=Math.round((e-n)/a)*a;return W(n,u)},j=(e,n)=>JSON.stringify(e)===JSON.stringify(n),D=e=>{const n=e[0]??Number(t.min),r=e[1]??Number(t.max);return n>r?[r,n]:[n,r]},g=(e,n)=>{var r,a;return f(e)?e=D(e).map(h):e=h(e),j(e,t.value)||(r=t.onChange)==null||r.call(t,e),n&&!j(e,o.current)&&((a=t.onChangeAfter)==null||a.call(t,e)),e},H=e=>{if(e.stopPropagation(),t.disabled||t.readonly)return;const{min:n,reverse:r,vertical:a,value:u}=t,l=V(C.current),v=()=>a?r?l.bottom-e.clientY:e.clientY-l.top:r?l.right-e.clientX:e.clientX-l.left,U=a?l.height:l.width,y=Number(n)+v()/U*d;if(f(u)){const[P,T]=u,q=(P+T)/2;y<=q?g([y,T],!0):g([P,y],!0)}else g(y,!0)},X=e=>{t.disabled||t.readonly||(b.start(e),c.current=JSON.parse(JSON.stringify(t.value)),f(c.current)?o.current=c.current.map(h):o.current=h(c.current),s.current="start")},Y=e=>{var l;if(t.disabled||t.readonly)return;s.current==="start"&&((l=t.onDragStart)==null||l.call(t,e,o.current)),b.move(e),s.current="dragging";const n=V(C.current),r=t.vertical?b.deltaY.current:b.deltaX.current,a=t.vertical?n.height:n.width;let u=r/a*d;if(t.reverse&&(u=-u),f(o.current)){const v=t.reverse?1-S.current:S.current;c.current[v]=o.current[v]+u}else c.current=+o.current+u;g(c.current)},M=e=>{var n;if(!(t.disabled||t.readonly)){if(s.current==="dragging"){const r=g(c.current,!0);(n=t.onDragEnd)==null||n.call(t,e,r)}s.current=""}},I=e=>typeof e=="number"?m("button-wrapper",["left","right"][e]):m("button-wrapper",t.reverse?"left":"right"),K=(e,n)=>{if(typeof n=="number"){const r=t[n===0?"leftButton":"rightButton"];if(r)return r}return typeof t.button=="function"?t.button({value:e}):t.button?t.button:N.jsx("div",{className:x(m("button")),style:p(t.buttonSize)})},R=(e,n)=>{const r=typeof n=="number"?t.value[n]:t.value;return N.jsx("div",{ref:e,role:"slider",className:x(I(n)),tabIndex:t.disabled||t.readonly?-1:0,"aria-valuemin":t.min,"aria-valuenow":r,"aria-valuemax":t.max,"aria-orientation":t.vertical?"vertical":"horizontal",onTouchStart:a=>{typeof n=="number"&&(S.current=n),X(a)},onTouchMove:Y,onTouchEnd:M,onTouchCancel:M,onClick:Q,children:K(c.current,n)},n)};return G(),N.jsx("div",{ref:C,style:J,className:x(t.className,m({vertical:t.vertical,disabled:t.disabled})),onClick:H,children:N.jsx("div",{className:x(m("bar")),style:z,children:t.range?[R(w,0),R(E,1)]:R(w)})})};B.defaultProps={min:0,max:100,step:1,range:!1};const ot=B;export{ot as S};
