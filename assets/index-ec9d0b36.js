import{j as c,c as C}from"./locales-548059eb.js";import{r as l}from"./react-libs-840bfe49.js";import{P as S,r as D}from"./Popup-a2a0dcda.js";import{l as O}from"./lock-click-c7a7fb0f.js";import{a as I}from"./index-59db7e48.js";import{L as R}from"./Loading-c60598b2.js";import{C as p}from"./ConfigProviderContext-0f984393.js";import{i as z,e as b,c as L}from"./base-1da74170.js";import{r as V,u as $}from"./render-38a34f7f.js";const j=e=>{let n=!1;const{prefixCls:r,createNamespace:f}=l.useContext(p),[o]=f("toast",r),N=()=>{const t=e.visible&&e.forbidClick;n!==t&&(n=t,O(n)),e.visible||O(!1)},k=()=>{var t;e.closeOnClick&&((t=e.onClose)==null||t.call(e))};l.useEffect(()=>{N()},[e.visible,e.forbidClick]);const v=()=>{const{icon:t,type:s,iconPrefix:d,iconSize:u,loadingType:m}=e;return t||s==="success"||s==="fail"?typeof t=="string"?c.jsx(I,{name:t||(s==="fail"?"cross":s),size:u,className:C(o("icon")),classPrefix:d}):t:s==="loading"?c.jsx(R,{className:C(o("loading")),type:m}):null},g=()=>{const{message:t}=e;return z(t)&&t!==""?c.jsx("div",{className:C(o("info")),children:t}):null};return c.jsxs(S,{className:C([o([e.position,{[e.type]:!e.icon}]),e.className]),visible:e.visible,overlay:e.overlay,transition:e.transition,overlayClass:e.overlayClass,overlayStyle:e.overlayStyle,closeOnClickOverlay:e.closeOnClickOverlay,lockScroll:!1,onClick:k,onClose:e.onClose,onClosed:e.onClosed,onOpened:e.onOpened,teleport:e.teleport,children:[v(),g()]})};j.defaultProps={type:"info",duration:2e3,position:"middle",transition:"rc-fade",loadingType:"circular",overlay:!1};const B=j,w={icon:"",message:"",className:"",type:"info",position:"middle",forbidClick:!1,duration:2e3,teleport:()=>document.body},T=[];let E=!1,h=b({},w);const y=new Map;function M(e){return L(e)?e:{message:e}}const P=()=>{let e=T.pop();for(;e;)e(),e=T.pop()},Q=()=>{setTimeout(P)},a=e=>{const n=M(e),r={config:()=>{},clear:()=>null};let f=0;const o=document.createElement("div");o.className="toast-contanier",D(n.teleport).appendChild(o);const k=()=>{const v={duration:2e3,...n},[g,t]=l.useState(!1),[s,d]=l.useState({...v}),u=l.useCallback(()=>{s.forbidClick&&O(!1),$(o)&&o.parentNode&&o.parentNode.removeChild(o)},[o]),m=l.useCallback(()=>{var i;t(!1),(i=n.onClose)==null||i.call(n)},[]);return r.clear=u,r.config=l.useCallback(i=>{d(x=>typeof i=="function"?{...x,...i(x)}:{...x,...i})},[d]),l.useEffect(()=>(t(!0),E||P(),T.push(u),s.duration!==0&&"duration"in s&&(f=window.setTimeout(m,+s.duration)),()=>{f!==0&&window.clearTimeout(f)}),[]),c.jsx(B,{...s,visible:g,teleport:()=>o,onClose:m,onClosed:u})};return V(c.jsx(k,{}),o),r},q=e=>n=>{a(b({},h,y.get(e),M(n),{type:e}))};["info","loading","success","fail"].forEach(e=>{a[e]=q(e)});a.allowMultiple=(e=!0)=>{E=e};a.clear=Q;const A=(e,n)=>{typeof e=="string"?y.set(e,n):b(h,e)};a.setDefaultOptions=A;a.resetDefaultOptions=e=>{typeof e=="string"?y.delete(e):(h=b({},w),y.clear())};const Z=a;export{Z as T};
