import{j as V,c as ze}from"./locales-548059eb.js";import{c as Qr}from"./rc-cli_site-mobile-demo-eaa39090.js";import{R as ue,r as S}from"./react-libs-840bfe49.js";import{_ as et,a as rt,b as _r}from"./CSSTransition-ea203202.js";import{C as Mr}from"./ConfigProviderContext-0f984393.js";import{b as tt}from"./index-9549eced.js";import{a as nt,F as ae}from"./Field-bf6f7ff1.js";import{t as We,U as it}from"./Uploader-7bc6c6ed.js";import{C as at}from"./constant-7552c2aa.js";import{a as xe}from"./index-9cdb6f61.js";import{T as Ve}from"./index-ec9d0b36.js";import{S as ot}from"./Switch-de57884e.js";import{a as Oe}from"./index-ed5750b7.js";import{R as De}from"./index-37f4268d.js";import{R as st}from"./Rate-09fd3016.js";import"./mobile-e0307386.js";import"./index-59db7e48.js";import"./unit-bb3e6514.js";import"./base-1da74170.js";import"./index-7a676a8e.js";import"./Popup-a2a0dcda.js";import"./Overlay-d703c016.js";import"./use-touch-76dedc34.js";import"./use-scroll-parent-a4dd715d.js";import"./use-event-listener-721bbec6.js";import"./interceptor-35467a90.js";import"./PopupContext-0557b73d.js";import"./index-cffeb12c.js";import"./use-height-bc7f71cd.js";import"./get-rect-4dc7f7e4.js";import"./render-38a34f7f.js";import"./scroll-e4e20d56.js";import"./raf-f0838b14.js";import"./number-b57f7cd4.js";import"./event-07a78c2b.js";import"./Image-d312b6e1.js";import"./use-set-state-898f20ed.js";import"./use-update-effect-09c1ca0c.js";import"./Loading-c60598b2.js";import"./index-091c3a1d.js";import"./index-945c9dff.js";import"./use-gesture-react.esm-484f41f1.js";import"./use-ref-state-6962d29d.js";import"./bound-41eb6e06.js";import"./use-mounted-ref-49b7ba77.js";import"./lock-click-c7a7fb0f.js";import"./use-merged-state-79e14435.js";import"./use-refs-92151253.js";import"./Checker-351621d3.js";import"./usePassiveHandler-330dfdb1.js";function Ir(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sr(n,r){if(n==null)return{};var e=et(n,r),i,t;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(t=0;t<a.length;t++)i=a[t],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function Q(n){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Q(n)}function ut(n,r){if(Q(n)!=="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,r||"default");if(Q(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function qr(n){var r=ut(n,"string");return Q(r)==="symbol"?r:String(r)}function be(n,r,e){return r=qr(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function wr(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,i)}return e}function M(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?wr(Object(e),!0).forEach(function(i){be(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):wr(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Ke(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,i=new Array(r);e<r;e++)i[e]=n[e];return i}function lt(n){if(Array.isArray(n))return Ke(n)}function Lr(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ur(n,r){if(n){if(typeof n=="string")return Ke(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ke(n,r)}}function ft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(n){return lt(n)||Lr(n)||ur(n)||ft()}function lr(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Pr(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,qr(i.key),i)}}function fr(n,r,e){return r&&Pr(n.prototype,r),e&&Pr(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ct(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&rt(n,r)}function Se(n){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(n)}function dt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ht(n,r){if(r&&(Q(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ir(n)}function pt(n){var r=dt();return function(){var i=Se(n),t;if(r){var a=Se(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return ht(this,t)}}var Ur={exports:{}},q={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=typeof Symbol=="function"&&Symbol.for,cr=Y?Symbol.for("react.element"):60103,dr=Y?Symbol.for("react.portal"):60106,$e=Y?Symbol.for("react.fragment"):60107,Ne=Y?Symbol.for("react.strict_mode"):60108,Ae=Y?Symbol.for("react.profiler"):60114,ke=Y?Symbol.for("react.provider"):60109,Te=Y?Symbol.for("react.context"):60110,hr=Y?Symbol.for("react.async_mode"):60111,_e=Y?Symbol.for("react.concurrent_mode"):60111,Me=Y?Symbol.for("react.forward_ref"):60112,Ie=Y?Symbol.for("react.suspense"):60113,mt=Y?Symbol.for("react.suspense_list"):60120,qe=Y?Symbol.for("react.memo"):60115,Le=Y?Symbol.for("react.lazy"):60116,gt=Y?Symbol.for("react.block"):60121,vt=Y?Symbol.for("react.fundamental"):60117,yt=Y?Symbol.for("react.responder"):60118,Ft=Y?Symbol.for("react.scope"):60119;function ee(n){if(typeof n=="object"&&n!==null){var r=n.$$typeof;switch(r){case cr:switch(n=n.type,n){case hr:case _e:case $e:case Ae:case Ne:case Ie:return n;default:switch(n=n&&n.$$typeof,n){case Te:case Me:case Le:case qe:case ke:return n;default:return r}}case dr:return r}}}function Wr(n){return ee(n)===_e}q.AsyncMode=hr;q.ConcurrentMode=_e;q.ContextConsumer=Te;q.ContextProvider=ke;q.Element=cr;q.ForwardRef=Me;q.Fragment=$e;q.Lazy=Le;q.Memo=qe;q.Portal=dr;q.Profiler=Ae;q.StrictMode=Ne;q.Suspense=Ie;q.isAsyncMode=function(n){return Wr(n)||ee(n)===hr};q.isConcurrentMode=Wr;q.isContextConsumer=function(n){return ee(n)===Te};q.isContextProvider=function(n){return ee(n)===ke};q.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===cr};q.isForwardRef=function(n){return ee(n)===Me};q.isFragment=function(n){return ee(n)===$e};q.isLazy=function(n){return ee(n)===Le};q.isMemo=function(n){return ee(n)===qe};q.isPortal=function(n){return ee(n)===dr};q.isProfiler=function(n){return ee(n)===Ae};q.isStrictMode=function(n){return ee(n)===Ne};q.isSuspense=function(n){return ee(n)===Ie};q.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===$e||n===_e||n===Ae||n===Ne||n===Ie||n===mt||typeof n=="object"&&n!==null&&(n.$$typeof===Le||n.$$typeof===qe||n.$$typeof===ke||n.$$typeof===Te||n.$$typeof===Me||n.$$typeof===vt||n.$$typeof===yt||n.$$typeof===Ft||n.$$typeof===gt)};q.typeOf=ee;Ur.exports=q;var bt=Ur.exports;function Ye(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[];return ue.Children.forEach(n,function(i){i==null&&!r.keepEmpty||(Array.isArray(i)?e=e.concat(Ye(i)):bt.isFragment(i)&&i.props?e=e.concat(Ye(i.props.children,r)):e.push(i))}),e}var Be={},wt=function(r){};function Pt(n,r){}function Et(n,r){}function xt(){Be={}}function Dr(n,r,e){!r&&!Be[e]&&(n(!1,e),Be[e]=!0)}function ie(n,r){Dr(Pt,n,r)}function Vt(n,r){Dr(Et,n,r)}ie.preMessage=wt;ie.resetWarned=xt;ie.noteOnce=Vt;var fe="RC_FORM_INTERNAL_HOOKS",U=function(){ie(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},pe=S.createContext({getFieldValue:U,getFieldsValue:U,getFieldError:U,getFieldWarning:U,getFieldsError:U,isFieldsTouched:U,isFieldTouched:U,isFieldValidating:U,isFieldsValidating:U,resetFields:U,setFields:U,setFieldValue:U,setFieldsValue:U,validateFields:U,submit:U,getInternalHooks:function(){return U(),{dispatch:U,initEntityValue:U,registerField:U,useSubscribe:U,setInitialValues:U,destroyForm:U,setCallbacks:U,registerWatch:U,getFields:U,setValidateMessages:U,setPreserve:U,getInitialValue:U}}}),Re=S.createContext(null);function Je(n){return n==null?[]:Array.isArray(n)?n:[n]}function Ot(n){return n&&!!n._init}function oe(){oe=function(){return n};var n={},r=Object.prototype,e=r.hasOwnProperty,i=Object.defineProperty||function(h,d,g){h[d]=g.value},t=typeof Symbol=="function"?Symbol:{},a=t.iterator||"@@iterator",o=t.asyncIterator||"@@asyncIterator",s=t.toStringTag||"@@toStringTag";function u(h,d,g){return Object.defineProperty(h,d,{value:g,enumerable:!0,configurable:!0,writable:!0}),h[d]}try{u({},"")}catch{u=function(g,x,j){return g[x]=j}}function l(h,d,g,x){var j=d&&d.prototype instanceof p?d:p,C=Object.create(j.prototype),L=new W(x||[]);return i(C,"_invoke",{value:R(h,g,L)}),C}function f(h,d,g){try{return{type:"normal",arg:h.call(d,g)}}catch(x){return{type:"throw",arg:x}}}n.wrap=l;var c={};function p(){}function b(){}function P(){}var v={};u(v,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(N([])));m&&m!==r&&e.call(m,a)&&(v=m);var w=P.prototype=p.prototype=Object.create(v);function F(h){["next","throw","return"].forEach(function(d){u(h,d,function(g){return this._invoke(d,g)})})}function E(h,d){function g(j,C,L,D){var z=f(h[j],h,C);if(z.type!=="throw"){var J=z.arg,T=J.value;return T&&Q(T)=="object"&&e.call(T,"__await")?d.resolve(T.__await).then(function(B){g("next",B,L,D)},function(B){g("throw",B,L,D)}):d.resolve(T).then(function(B){J.value=B,L(J)},function(B){return g("throw",B,L,D)})}D(z.arg)}var x;i(this,"_invoke",{value:function(C,L){function D(){return new d(function(z,J){g(C,L,z,J)})}return x=x?x.then(D,D):D()}})}function R(h,d,g){var x="suspendedStart";return function(j,C){if(x==="executing")throw new Error("Generator is already running");if(x==="completed"){if(j==="throw")throw C;return k()}for(g.method=j,g.arg=C;;){var L=g.delegate;if(L){var D=O(L,g);if(D){if(D===c)continue;return D}}if(g.method==="next")g.sent=g._sent=g.arg;else if(g.method==="throw"){if(x==="suspendedStart")throw x="completed",g.arg;g.dispatchException(g.arg)}else g.method==="return"&&g.abrupt("return",g.arg);x="executing";var z=f(h,d,g);if(z.type==="normal"){if(x=g.done?"completed":"suspendedYield",z.arg===c)continue;return{value:z.arg,done:g.done}}z.type==="throw"&&(x="completed",g.method="throw",g.arg=z.arg)}}}function O(h,d){var g=d.method,x=h.iterator[g];if(x===void 0)return d.delegate=null,g==="throw"&&h.iterator.return&&(d.method="return",d.arg=void 0,O(h,d),d.method==="throw")||g!=="return"&&(d.method="throw",d.arg=new TypeError("The iterator does not provide a '"+g+"' method")),c;var j=f(x,h.iterator,d.arg);if(j.type==="throw")return d.method="throw",d.arg=j.arg,d.delegate=null,c;var C=j.arg;return C?C.done?(d[h.resultName]=C.value,d.next=h.nextLoc,d.method!=="return"&&(d.method="next",d.arg=void 0),d.delegate=null,c):C:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,c)}function $(h){var d={tryLoc:h[0]};1 in h&&(d.catchLoc=h[1]),2 in h&&(d.finallyLoc=h[2],d.afterLoc=h[3]),this.tryEntries.push(d)}function I(h){var d=h.completion||{};d.type="normal",delete d.arg,h.completion=d}function W(h){this.tryEntries=[{tryLoc:"root"}],h.forEach($,this),this.reset(!0)}function N(h){if(h){var d=h[a];if(d)return d.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var g=-1,x=function j(){for(;++g<h.length;)if(e.call(h,g))return j.value=h[g],j.done=!1,j;return j.value=void 0,j.done=!0,j};return x.next=x}}return{next:k}}function k(){return{value:void 0,done:!0}}return b.prototype=P,i(w,"constructor",{value:P,configurable:!0}),i(P,"constructor",{value:b,configurable:!0}),b.displayName=u(P,s,"GeneratorFunction"),n.isGeneratorFunction=function(h){var d=typeof h=="function"&&h.constructor;return!!d&&(d===b||(d.displayName||d.name)==="GeneratorFunction")},n.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,P):(h.__proto__=P,u(h,s,"GeneratorFunction")),h.prototype=Object.create(w),h},n.awrap=function(h){return{__await:h}},F(E.prototype),u(E.prototype,o,function(){return this}),n.AsyncIterator=E,n.async=function(h,d,g,x,j){j===void 0&&(j=Promise);var C=new E(l(h,d,g,x),j);return n.isGeneratorFunction(d)?C:C.next().then(function(L){return L.done?L.value:C.next()})},F(w),u(w,s,"Generator"),u(w,a,function(){return this}),u(w,"toString",function(){return"[object Generator]"}),n.keys=function(h){var d=Object(h),g=[];for(var x in d)g.push(x);return g.reverse(),function j(){for(;g.length;){var C=g.pop();if(C in d)return j.value=C,j.done=!1,j}return j.done=!0,j}},n.values=N,W.prototype={constructor:W,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!d)for(var g in this)g.charAt(0)==="t"&&e.call(this,g)&&!isNaN(+g.slice(1))&&(this[g]=void 0)},stop:function(){this.done=!0;var d=this.tryEntries[0].completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var g=this;function x(J,T){return L.type="throw",L.arg=d,g.next=J,T&&(g.method="next",g.arg=void 0),!!T}for(var j=this.tryEntries.length-1;j>=0;--j){var C=this.tryEntries[j],L=C.completion;if(C.tryLoc==="root")return x("end");if(C.tryLoc<=this.prev){var D=e.call(C,"catchLoc"),z=e.call(C,"finallyLoc");if(D&&z){if(this.prev<C.catchLoc)return x(C.catchLoc,!0);if(this.prev<C.finallyLoc)return x(C.finallyLoc)}else if(D){if(this.prev<C.catchLoc)return x(C.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return x(C.finallyLoc)}}}},abrupt:function(d,g){for(var x=this.tryEntries.length-1;x>=0;--x){var j=this.tryEntries[x];if(j.tryLoc<=this.prev&&e.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var C=j;break}}C&&(d==="break"||d==="continue")&&C.tryLoc<=g&&g<=C.finallyLoc&&(C=null);var L=C?C.completion:{};return L.type=d,L.arg=g,C?(this.method="next",this.next=C.finallyLoc,c):this.complete(L)},complete:function(d,g){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&g&&(this.next=g),c},finish:function(d){for(var g=this.tryEntries.length-1;g>=0;--g){var x=this.tryEntries[g];if(x.finallyLoc===d)return this.complete(x.completion,x.afterLoc),I(x),c}},catch:function(d){for(var g=this.tryEntries.length-1;g>=0;--g){var x=this.tryEntries[g];if(x.tryLoc===d){var j=x.completion;if(j.type==="throw"){var C=j.arg;I(x)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(d,g,x){return this.delegate={iterator:N(d),resultName:g,nextLoc:x},this.method==="next"&&(this.arg=void 0),c}},n}function Er(n,r,e,i,t,a,o){try{var s=n[a](o),u=s.value}catch(l){e(l);return}s.done?r(u):Promise.resolve(u).then(i,t)}function Ue(n){return function(){var r=this,e=arguments;return new Promise(function(i,t){var a=n.apply(r,e);function o(u){Er(a,i,t,o,s,"next",u)}function s(u){Er(a,i,t,o,s,"throw",u)}o(void 0)})}}function ce(){return ce=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ce.apply(this,arguments)}function jt(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,we(n,r)}function Ze(n){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(n)}function we(n,r){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},we(n,r)}function Ct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ce(n,r,e){return Ct()?Ce=Reflect.construct.bind():Ce=function(t,a,o){var s=[null];s.push.apply(s,a);var u=Function.bind.apply(t,s),l=new u;return o&&we(l,o.prototype),l},Ce.apply(null,arguments)}function St(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Xe(n){var r=typeof Map=="function"?new Map:void 0;return Xe=function(i){if(i===null||!St(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,t)}function t(){return Ce(i,arguments,Ze(this).constructor)}return t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),we(t,i)},Xe(n)}var Rt=/%[sdj%]/g,$t=function(){};typeof process<"u"&&process.env;function Qe(n){if(!n||!n.length)return null;var r={};return n.forEach(function(e){var i=e.field;r[i]=r[i]||[],r[i].push(e)}),r}function X(n){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];var t=0,a=e.length;if(typeof n=="function")return n.apply(null,e);if(typeof n=="string"){var o=n.replace(Rt,function(s){if(s==="%%")return"%";if(t>=a)return s;switch(s){case"%s":return String(e[t++]);case"%d":return Number(e[t++]);case"%j":try{return JSON.stringify(e[t++])}catch{return"[Circular]"}break;default:return s}});return o}return n}function Nt(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function K(n,r){return!!(n==null||r==="array"&&Array.isArray(n)&&!n.length||Nt(r)&&typeof n=="string"&&!n)}function At(n,r,e){var i=[],t=0,a=n.length;function o(s){i.push.apply(i,s||[]),t++,t===a&&e(i)}n.forEach(function(s){r(s,o)})}function xr(n,r,e){var i=0,t=n.length;function a(o){if(o&&o.length){e(o);return}var s=i;i=i+1,s<t?r(n[s],a):e([])}a([])}function kt(n){var r=[];return Object.keys(n).forEach(function(e){r.push.apply(r,n[e]||[])}),r}var Vr=function(n){jt(r,n);function r(e,i){var t;return t=n.call(this,"Async Validation Error")||this,t.errors=e,t.fields=i,t}return r}(Xe(Error));function Tt(n,r,e,i,t){if(r.first){var a=new Promise(function(p,b){var P=function(m){return i(m),m.length?b(new Vr(m,Qe(m))):p(t)},v=kt(n);xr(v,e,P)});return a.catch(function(p){return p}),a}var o=r.firstFields===!0?Object.keys(n):r.firstFields||[],s=Object.keys(n),u=s.length,l=0,f=[],c=new Promise(function(p,b){var P=function(y){if(f.push.apply(f,y),l++,l===u)return i(f),f.length?b(new Vr(f,Qe(f))):p(t)};s.length||(i(f),p(t)),s.forEach(function(v){var y=n[v];o.indexOf(v)!==-1?xr(y,e,P):At(y,e,P)})});return c.catch(function(p){return p}),c}function _t(n){return!!(n&&n.message!==void 0)}function Mt(n,r){for(var e=n,i=0;i<r.length;i++){if(e==null)return e;e=e[r[i]]}return e}function Or(n,r){return function(e){var i;return n.fullFields?i=Mt(r,n.fullFields):i=r[e.field||n.fullField],_t(e)?(e.field=e.field||n.fullField,e.fieldValue=i,e):{message:typeof e=="function"?e():e,fieldValue:i,field:e.field||n.fullField}}}function jr(n,r){if(r){for(var e in r)if(r.hasOwnProperty(e)){var i=r[e];typeof i=="object"&&typeof n[e]=="object"?n[e]=ce({},n[e],i):n[e]=i}}return n}var Hr=function(r,e,i,t,a,o){r.required&&(!i.hasOwnProperty(r.field)||K(e,o||r.type))&&t.push(X(a.messages.required,r.fullField))},It=function(r,e,i,t,a){(/^\s+$/.test(e)||e==="")&&t.push(X(a.messages.whitespace,r.fullField))},je,qt=function(){if(je)return je;var n="[a-fA-F\\d:]",r=function(E){return E&&E.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",t=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+e+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+e+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+e+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+e+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+e+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+e+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+e+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+e+"$)|(?:^"+t+"$)"),o=new RegExp("^"+e+"$"),s=new RegExp("^"+t+"$"),u=function(E){return E&&E.exact?a:new RegExp("(?:"+r(E)+e+r(E)+")|(?:"+r(E)+t+r(E)+")","g")};u.v4=function(F){return F&&F.exact?o:new RegExp(""+r(F)+e+r(F),"g")},u.v6=function(F){return F&&F.exact?s:new RegExp(""+r(F)+t+r(F),"g")};var l="(?:(?:[a-z]+:)?//)",f="(?:\\S+(?::\\S*)?@)?",c=u.v4().source,p=u.v6().source,b="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",P="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",v="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",m='(?:[/?#][^\\s"]*)?',w="(?:"+l+"|www\\.)"+f+"(?:localhost|"+c+"|"+p+"|"+b+P+v+")"+y+m;return je=new RegExp("(?:^"+w+"$)","i"),je},Cr={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ge={integer:function(r){return ge.number(r)&&parseInt(r,10)===r},float:function(r){return ge.number(r)&&!ge.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!ge.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(Cr.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(qt())},hex:function(r){return typeof r=="string"&&!!r.match(Cr.hex)}},Lt=function(r,e,i,t,a){if(r.required&&e===void 0){Hr(r,e,i,t,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=r.type;o.indexOf(s)>-1?ge[s](e)||t.push(X(a.messages.types[s],r.fullField,r.type)):s&&typeof e!==r.type&&t.push(X(a.messages.types[s],r.fullField,r.type))},Ut=function(r,e,i,t,a){var o=typeof r.len=="number",s=typeof r.min=="number",u=typeof r.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=e,c=null,p=typeof e=="number",b=typeof e=="string",P=Array.isArray(e);if(p?c="number":b?c="string":P&&(c="array"),!c)return!1;P&&(f=e.length),b&&(f=e.replace(l,"_").length),o?f!==r.len&&t.push(X(a.messages[c].len,r.fullField,r.len)):s&&!u&&f<r.min?t.push(X(a.messages[c].min,r.fullField,r.min)):u&&!s&&f>r.max?t.push(X(a.messages[c].max,r.fullField,r.max)):s&&u&&(f<r.min||f>r.max)&&t.push(X(a.messages[c].range,r.fullField,r.min,r.max))},de="enum",Wt=function(r,e,i,t,a){r[de]=Array.isArray(r[de])?r[de]:[],r[de].indexOf(e)===-1&&t.push(X(a.messages[de],r.fullField,r[de].join(", ")))},Dt=function(r,e,i,t,a){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||t.push(X(a.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var o=new RegExp(r.pattern);o.test(e)||t.push(X(a.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},A={required:Hr,whitespace:It,type:Lt,range:Ut,enum:Wt,pattern:Dt},Ht=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e,"string")&&!r.required)return i();A.required(r,e,t,o,a,"string"),K(e,"string")||(A.type(r,e,t,o,a),A.range(r,e,t,o,a),A.pattern(r,e,t,o,a),r.whitespace===!0&&A.whitespace(r,e,t,o,a))}i(o)},Gt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a),e!==void 0&&A.type(r,e,t,o,a)}i(o)},zt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(e===""&&(e=void 0),K(e)&&!r.required)return i();A.required(r,e,t,o,a),e!==void 0&&(A.type(r,e,t,o,a),A.range(r,e,t,o,a))}i(o)},Kt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a),e!==void 0&&A.type(r,e,t,o,a)}i(o)},Yt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a),K(e)||A.type(r,e,t,o,a)}i(o)},Bt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a),e!==void 0&&(A.type(r,e,t,o,a),A.range(r,e,t,o,a))}i(o)},Jt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a),e!==void 0&&(A.type(r,e,t,o,a),A.range(r,e,t,o,a))}i(o)},Zt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(e==null&&!r.required)return i();A.required(r,e,t,o,a,"array"),e!=null&&(A.type(r,e,t,o,a),A.range(r,e,t,o,a))}i(o)},Xt=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a),e!==void 0&&A.type(r,e,t,o,a)}i(o)},Qt="enum",en=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a),e!==void 0&&A[Qt](r,e,t,o,a)}i(o)},rn=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e,"string")&&!r.required)return i();A.required(r,e,t,o,a),K(e,"string")||A.pattern(r,e,t,o,a)}i(o)},tn=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e,"date")&&!r.required)return i();if(A.required(r,e,t,o,a),!K(e,"date")){var u;e instanceof Date?u=e:u=new Date(e),A.type(r,u,t,o,a),u&&A.range(r,u.getTime(),t,o,a)}}i(o)},nn=function(r,e,i,t,a){var o=[],s=Array.isArray(e)?"array":typeof e;A.required(r,e,t,o,a,s),i(o)},He=function(r,e,i,t,a){var o=r.type,s=[],u=r.required||!r.required&&t.hasOwnProperty(r.field);if(u){if(K(e,o)&&!r.required)return i();A.required(r,e,t,s,a,o),K(e,o)||A.type(r,e,t,s,a)}i(s)},an=function(r,e,i,t,a){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(K(e)&&!r.required)return i();A.required(r,e,t,o,a)}i(o)},ye={string:Ht,method:Gt,number:zt,boolean:Kt,regexp:Yt,integer:Bt,float:Jt,array:Zt,object:Xt,enum:en,pattern:rn,date:tn,url:He,hex:He,email:He,required:nn,any:an};function er(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var rr=er(),Ee=function(){function n(e){this.rules=null,this._messages=rr,this.define(e)}var r=n.prototype;return r.define=function(i){var t=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(a){var o=i[a];t.rules[a]=Array.isArray(o)?o:[o]})},r.messages=function(i){return i&&(this._messages=jr(er(),i)),this._messages},r.validate=function(i,t,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=function(){});var s=i,u=t,l=a;if(typeof u=="function"&&(l=u,u={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,s),Promise.resolve(s);function f(v){var y=[],m={};function w(E){if(Array.isArray(E)){var R;y=(R=y).concat.apply(R,E)}else y.push(E)}for(var F=0;F<v.length;F++)w(v[F]);y.length?(m=Qe(y),l(y,m)):l(null,s)}if(u.messages){var c=this.messages();c===rr&&(c=er()),jr(c,u.messages),u.messages=c}else u.messages=this.messages();var p={},b=u.keys||Object.keys(this.rules);b.forEach(function(v){var y=o.rules[v],m=s[v];y.forEach(function(w){var F=w;typeof F.transform=="function"&&(s===i&&(s=ce({},s)),m=s[v]=F.transform(m)),typeof F=="function"?F={validator:F}:F=ce({},F),F.validator=o.getValidationMethod(F),F.validator&&(F.field=v,F.fullField=F.fullField||v,F.type=o.getType(F),p[v]=p[v]||[],p[v].push({rule:F,value:m,source:s,field:v}))})});var P={};return Tt(p,u,function(v,y){var m=v.rule,w=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");w=w&&(m.required||!m.required&&v.value),m.field=v.field;function F(O,$){return ce({},$,{fullField:m.fullField+"."+O,fullFields:m.fullFields?[].concat(m.fullFields,[O]):[O]})}function E(O){O===void 0&&(O=[]);var $=Array.isArray(O)?O:[O];!u.suppressWarning&&$.length&&n.warning("async-validator:",$),$.length&&m.message!==void 0&&($=[].concat(m.message));var I=$.map(Or(m,s));if(u.first&&I.length)return P[m.field]=1,y(I);if(!w)y(I);else{if(m.required&&!v.value)return m.message!==void 0?I=[].concat(m.message).map(Or(m,s)):u.error&&(I=[u.error(m,X(u.messages.required,m.field))]),y(I);var W={};m.defaultField&&Object.keys(v.value).map(function(h){W[h]=m.defaultField}),W=ce({},W,v.rule.fields);var N={};Object.keys(W).forEach(function(h){var d=W[h],g=Array.isArray(d)?d:[d];N[h]=g.map(F.bind(null,h))});var k=new n(N);k.messages(u.messages),v.rule.options&&(v.rule.options.messages=u.messages,v.rule.options.error=u.error),k.validate(v.value,v.rule.options||u,function(h){var d=[];I&&I.length&&d.push.apply(d,I),h&&h.length&&d.push.apply(d,h),y(d.length?d:null)})}}var R;if(m.asyncValidator)R=m.asyncValidator(m,v.value,E,v.source,u);else if(m.validator){try{R=m.validator(m,v.value,E,v.source,u)}catch(O){console.error==null||console.error(O),u.suppressValidatorError||setTimeout(function(){throw O},0),E(O.message)}R===!0?E():R===!1?E(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):R instanceof Array?E(R):R instanceof Error&&E(R.message)}R&&R.then&&R.then(function(){return E()},function(O){return E(O)})},function(v){f(v)},s)},r.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!ye.hasOwnProperty(i.type))throw new Error(X("Unknown rule type %s",i.type));return i.type||"string"},r.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var t=Object.keys(i),a=t.indexOf("message");return a!==-1&&t.splice(a,1),t.length===1&&t[0]==="required"?ye.required:ye[this.getType(i)]||void 0},n}();Ee.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");ye[r]=e};Ee.warning=$t;Ee.messages=rr;Ee.validators=ye;var Z="'${name}' is not a valid ${type}",Gr={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Z,method:Z,array:Z,object:Z,number:Z,date:Z,boolean:Z,integer:Z,float:Z,regexp:Z,email:Z,url:Z,hex:Z},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function zr(n){if(Array.isArray(n))return n}function Kr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(n){return zr(n)||Lr(n)||ur(n)||Kr()}function ne(n,r){for(var e=n,i=0;i<r.length;i+=1){if(e==null)return;e=e[r[i]]}return e}function Yr(n,r,e,i){if(!r.length)return e;var t=on(r),a=t[0],o=t.slice(1),s;return!n&&typeof a=="number"?s=[]:Array.isArray(n)?s=_(n):s=M({},n),i&&e===void 0&&o.length===1?delete s[a][o[0]]:s[a]=Yr(s[a],o,e,i),s}function te(n,r,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return r.length&&i&&e===void 0&&!ne(n,r.slice(0,-1))?n:Yr(n,r,e,i)}function sn(n){return Q(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function Sr(n){return Array.isArray(n)?[]:{}}var un=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function ve(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var i=Sr(r[0]);return r.forEach(function(t){function a(o,s){var u=new Set(s),l=ne(t,o),f=Array.isArray(l);if(f||sn(l)){if(!u.has(l)){u.add(l);var c=ne(i,o);f?i=te(i,o,[]):(!c||Q(c)!=="object")&&(i=te(i,o,Sr(l))),un(l).forEach(function(p){a([].concat(_(o),[p]),u)})}}else i=te(i,o,l)}a([])}),i}var Rr=Ee;function ln(n,r){return n.replace(/\$\{\w+\}/g,function(e){var i=e.slice(2,-1);return r[i]})}var $r="CODE_LOGIC_ERROR";function tr(n,r,e,i,t){return nr.apply(this,arguments)}function nr(){return nr=Ue(oe().mark(function n(r,e,i,t,a){var o,s,u,l,f,c,p,b,P;return oe().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return o=M({},i),delete o.ruleIndex,Rr.warning=function(){},o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(m){return console.error(m),Promise.reject($r)}}),u=null,o&&o.type==="array"&&o.defaultField&&(u=o.defaultField,delete o.defaultField),l=new Rr(be({},r,[o])),f=ve(Gr,t.validateMessages),l.messages(f),c=[],y.prev=10,y.next=13,Promise.resolve(l.validate(be({},r,e),M({},t)));case 13:y.next=18;break;case 15:y.prev=15,y.t0=y.catch(10),y.t0.errors&&(c=y.t0.errors.map(function(m,w){var F=m.message,E=F===$r?f.default:F;return S.isValidElement(E)?S.cloneElement(E,{key:"error_".concat(w)}):E}));case 18:if(!(!c.length&&u)){y.next=23;break}return y.next=21,Promise.all(e.map(function(m,w){return tr("".concat(r,".").concat(w),m,u,t,a)}));case 21:return p=y.sent,y.abrupt("return",p.reduce(function(m,w){return[].concat(_(m),_(w))},[]));case 23:return b=M(M({},i),{},{name:r,enum:(i.enum||[]).join(", ")},a),P=c.map(function(m){return typeof m=="string"?ln(m,b):m}),y.abrupt("return",P);case 26:case"end":return y.stop()}},n,null,[[10,15]])})),nr.apply(this,arguments)}function fn(n,r,e,i,t,a){var o=n.join("."),s=e.map(function(f,c){var p=f.validator,b=M(M({},f),{},{ruleIndex:c});return p&&(b.validator=function(P,v,y){var m=!1,w=function(){for(var R=arguments.length,O=new Array(R),$=0;$<R;$++)O[$]=arguments[$];Promise.resolve().then(function(){ie(!m,"Your validator function has already return a promise. `callback` will be ignored."),m||y.apply(void 0,O)})},F=p(P,v,w);m=F&&typeof F.then=="function"&&typeof F.catch=="function",ie(m,"`callback` is deprecated. Please return a promise instead."),m&&F.then(function(){y()}).catch(function(E){y(E||" ")})}),b}).sort(function(f,c){var p=f.warningOnly,b=f.ruleIndex,P=c.warningOnly,v=c.ruleIndex;return!!p==!!P?b-v:p?1:-1}),u;if(t===!0)u=new Promise(function(){var f=Ue(oe().mark(function c(p,b){var P,v,y;return oe().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:P=0;case 1:if(!(P<s.length)){w.next=12;break}return v=s[P],w.next=5,tr(o,r,v,i,a);case 5:if(y=w.sent,!y.length){w.next=9;break}return b([{errors:y,rule:v}]),w.abrupt("return");case 9:P+=1,w.next=1;break;case 12:p([]);case 13:case"end":return w.stop()}},c)}));return function(c,p){return f.apply(this,arguments)}}());else{var l=s.map(function(f){return tr(o,r,f,i,a).then(function(c){return{errors:c,rule:f}})});u=(t?dn(l):cn(l)).then(function(f){return Promise.reject(f)})}return u.catch(function(f){return f}),u}function cn(n){return ir.apply(this,arguments)}function ir(){return ir=Ue(oe().mark(function n(r){return oe().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(r).then(function(t){var a,o=(a=[]).concat.apply(a,_(t));return o}));case 1:case"end":return i.stop()}},n)})),ir.apply(this,arguments)}function dn(n){return ar.apply(this,arguments)}function ar(){return ar=Ue(oe().mark(function n(r){var e;return oe().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,t.abrupt("return",new Promise(function(a){r.forEach(function(o){o.then(function(s){s.errors.length&&a([s]),e+=1,e===r.length&&a([])})})}));case 2:case"end":return t.stop()}},n)})),ar.apply(this,arguments)}function H(n){return Je(n)}function Nr(n,r){var e={};return r.forEach(function(i){var t=ne(n,i);e=te(e,i,t)}),e}function Fe(n,r){return n&&n.some(function(e){return Br(e,r)})}function Br(n,r){return!n||!r||n.length!==r.length?!1:n.every(function(e,i){return r[i]===e})}function hn(n,r){if(n===r)return!0;if(!n&&r||n&&!r||!n||!r||Q(n)!=="object"||Q(r)!=="object")return!1;var e=Object.keys(n),i=Object.keys(r),t=new Set([].concat(e,i));return _(t).every(function(a){var o=n[a],s=r[a];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function pn(n){var r=arguments.length<=1?void 0:arguments[1];return r&&r.target&&Q(r.target)==="object"&&n in r.target?r.target[n]:r}function Ar(n,r,e){var i=n.length;if(r<0||r>=i||e<0||e>=i)return n;var t=n[r],a=r-e;return a>0?[].concat(_(n.slice(0,e)),[t],_(n.slice(e,r)),_(n.slice(r+1,i))):a<0?[].concat(_(n.slice(0,r)),_(n.slice(r+1,e+1)),[t],_(n.slice(e+1,i))):n}var mn=["name"],re=[];function kr(n,r,e,i,t,a){return typeof n=="function"?n(r,e,"source"in a?{source:a.source}:{}):i!==t}var pr=function(n){ct(e,n);var r=pt(e);function e(i){var t;if(lr(this,e),t=r.call(this,i),t.state={resetCount:0},t.cancelRegisterFunc=null,t.mounted=!1,t.touched=!1,t.dirty=!1,t.validatePromise=void 0,t.prevValidating=void 0,t.errors=re,t.warnings=re,t.cancelRegister=function(){var u=t.props,l=u.preserve,f=u.isListField,c=u.name;t.cancelRegisterFunc&&t.cancelRegisterFunc(f,l,H(c)),t.cancelRegisterFunc=null},t.getNamePath=function(){var u=t.props,l=u.name,f=u.fieldContext,c=f.prefixName,p=c===void 0?[]:c;return l!==void 0?[].concat(_(p),_(l)):[]},t.getRules=function(){var u=t.props,l=u.rules,f=l===void 0?[]:l,c=u.fieldContext;return f.map(function(p){return typeof p=="function"?p(c):p})},t.refresh=function(){t.mounted&&t.setState(function(u){var l=u.resetCount;return{resetCount:l+1}})},t.triggerMetaEvent=function(u){var l=t.props.onMetaChange;l==null||l(M(M({},t.getMeta()),{},{destroy:u}))},t.onStoreChange=function(u,l,f){var c=t.props,p=c.shouldUpdate,b=c.dependencies,P=b===void 0?[]:b,v=c.onReset,y=f.store,m=t.getNamePath(),w=t.getValue(u),F=t.getValue(y),E=l&&Fe(l,m);switch(f.type==="valueUpdate"&&f.source==="external"&&w!==F&&(t.touched=!0,t.dirty=!0,t.validatePromise=null,t.errors=re,t.warnings=re,t.triggerMetaEvent()),f.type){case"reset":if(!l||E){t.touched=!1,t.dirty=!1,t.validatePromise=void 0,t.errors=re,t.warnings=re,t.triggerMetaEvent(),v==null||v(),t.refresh();return}break;case"remove":{if(p){t.reRender();return}break}case"setField":{if(E){var R=f.data;"touched"in R&&(t.touched=R.touched),"validating"in R&&!("originRCField"in R)&&(t.validatePromise=R.validating?Promise.resolve([]):null),"errors"in R&&(t.errors=R.errors||re),"warnings"in R&&(t.warnings=R.warnings||re),t.dirty=!0,t.triggerMetaEvent(),t.reRender();return}if(p&&!m.length&&kr(p,u,y,w,F,f)){t.reRender();return}break}case"dependenciesUpdate":{var O=P.map(H);if(O.some(function($){return Fe(f.relatedFields,$)})){t.reRender();return}break}default:if(E||(!P.length||m.length||p)&&kr(p,u,y,w,F,f)){t.reRender();return}break}p===!0&&t.reRender()},t.validateRules=function(u){var l=t.getNamePath(),f=t.getValue(),c=u||{},p=c.triggerName,b=c.validateOnly,P=b===void 0?!1:b,v=Promise.resolve().then(function(){if(!t.mounted)return[];var y=t.props,m=y.validateFirst,w=m===void 0?!1:m,F=y.messageVariables,E=t.getRules();p&&(E=E.filter(function(O){return O}).filter(function(O){var $=O.validateTrigger;if(!$)return!0;var I=Je($);return I.includes(p)}));var R=fn(l,f,E,u,w,F);return R.catch(function(O){return O}).then(function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:re;if(t.validatePromise===v){var $;t.validatePromise=null;var I=[],W=[];($=O.forEach)===null||$===void 0||$.call(O,function(N){var k=N.rule.warningOnly,h=N.errors,d=h===void 0?re:h;k?W.push.apply(W,_(d)):I.push.apply(I,_(d))}),t.errors=I,t.warnings=W,t.triggerMetaEvent(),t.reRender()}}),R});return P||(t.validatePromise=v,t.dirty=!0,t.errors=re,t.warnings=re,t.triggerMetaEvent(),t.reRender()),v},t.isFieldValidating=function(){return!!t.validatePromise},t.isFieldTouched=function(){return t.touched},t.isFieldDirty=function(){if(t.dirty||t.props.initialValue!==void 0)return!0;var u=t.props.fieldContext,l=u.getInternalHooks(fe),f=l.getInitialValue;return f(t.getNamePath())!==void 0},t.getErrors=function(){return t.errors},t.getWarnings=function(){return t.warnings},t.isListField=function(){return t.props.isListField},t.isList=function(){return t.props.isList},t.isPreserve=function(){return t.props.preserve},t.getMeta=function(){t.prevValidating=t.isFieldValidating();var u={touched:t.isFieldTouched(),validating:t.prevValidating,errors:t.errors,warnings:t.warnings,name:t.getNamePath(),validated:t.validatePromise===null};return u},t.getOnlyChild=function(u){if(typeof u=="function"){var l=t.getMeta();return M(M({},t.getOnlyChild(u(t.getControlled(),l,t.props.fieldContext))),{},{isFunction:!0})}var f=Ye(u);return f.length!==1||!S.isValidElement(f[0])?{child:f,isFunction:!1}:{child:f[0],isFunction:!1}},t.getValue=function(u){var l=t.props.fieldContext.getFieldsValue,f=t.getNamePath();return ne(u||l(!0),f)},t.getControlled=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=t.props,f=l.trigger,c=l.validateTrigger,p=l.getValueFromEvent,b=l.normalize,P=l.valuePropName,v=l.getValueProps,y=l.fieldContext,m=c!==void 0?c:y.validateTrigger,w=t.getNamePath(),F=y.getInternalHooks,E=y.getFieldsValue,R=F(fe),O=R.dispatch,$=t.getValue(),I=v||function(h){return be({},P,h)},W=u[f],N=M(M({},u),I($));N[f]=function(){t.touched=!0,t.dirty=!0,t.triggerMetaEvent();for(var h,d=arguments.length,g=new Array(d),x=0;x<d;x++)g[x]=arguments[x];p?h=p.apply(void 0,g):h=pn.apply(void 0,[P].concat(g)),b&&(h=b(h,$,E(!0))),O({type:"updateValue",namePath:w,value:h}),W&&W.apply(void 0,g)};var k=Je(m||[]);return k.forEach(function(h){var d=N[h];N[h]=function(){d&&d.apply(void 0,arguments);var g=t.props.rules;g&&g.length&&O({type:"validateField",namePath:w,triggerName:h})}}),N},i.fieldContext){var a=i.fieldContext.getInternalHooks,o=a(fe),s=o.initEntityValue;s(Ir(t))}return t}return fr(e,[{key:"componentDidMount",value:function(){var t=this.props,a=t.shouldUpdate,o=t.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,u=s(fe),l=u.registerField;this.cancelRegisterFunc=l(this)}a===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t=this.state.resetCount,a=this.props.children,o=this.getOnlyChild(a),s=o.child,u=o.isFunction,l;return u?l=s:S.isValidElement(s)?l=S.cloneElement(s,this.getControlled(s.props)):(ie(!s,"`children` of Field is not validate ReactElement."),l=s),S.createElement(S.Fragment,{key:t},l)}}]),e}(S.Component);pr.contextType=pe;pr.defaultProps={trigger:"onChange",valuePropName:"value"};function mr(n){var r=n.name,e=sr(n,mn),i=S.useContext(pe),t=S.useContext(Re),a=r!==void 0?H(r):void 0,o="keep";return e.isListField||(o="_".concat((a||[]).join("_"))),S.createElement(pr,_r({key:o,name:a,isListField:!!t},e,{fieldContext:i}))}var Jr=function(r){var e=r.name,i=r.initialValue,t=r.children,a=r.rules,o=r.validateTrigger,s=r.isListField,u=S.useContext(pe),l=S.useContext(Re),f=S.useRef({keys:[],id:0}),c=f.current,p=S.useMemo(function(){var y=H(u.prefixName)||[];return[].concat(_(y),_(H(e)))},[u.prefixName,e]),b=S.useMemo(function(){return M(M({},u),{},{prefixName:p})},[u,p]),P=S.useMemo(function(){return{getKey:function(m){var w=p.length,F=m[w];return[c.keys[F],m.slice(w+1)]}}},[p]);if(typeof t!="function")return ie(!1,"Form.List only accepts function as children."),null;var v=function(m,w,F){var E=F.source;return E==="internal"?!1:m!==w};return S.createElement(Re.Provider,{value:P},S.createElement(pe.Provider,{value:b},S.createElement(mr,{name:[],shouldUpdate:v,rules:a,validateTrigger:o,initialValue:i,isList:!0,isListField:s??!!l},function(y,m){var w=y.value,F=w===void 0?[]:w,E=y.onChange,R=u.getFieldValue,O=function(){var N=R(p||[]);return N||[]},$={add:function(N,k){var h=O();k>=0&&k<=h.length?(c.keys=[].concat(_(c.keys.slice(0,k)),[c.id],_(c.keys.slice(k))),E([].concat(_(h.slice(0,k)),[N],_(h.slice(k))))):(c.keys=[].concat(_(c.keys),[c.id]),E([].concat(_(h),[N]))),c.id+=1},remove:function(N){var k=O(),h=new Set(Array.isArray(N)?N:[N]);h.size<=0||(c.keys=c.keys.filter(function(d,g){return!h.has(g)}),E(k.filter(function(d,g){return!h.has(g)})))},move:function(N,k){if(N!==k){var h=O();N<0||N>=h.length||k<0||k>=h.length||(c.keys=Ar(c.keys,N,k),E(Ar(h,N,k)))}}},I=F||[];return Array.isArray(I)||(I=[]),t(I.map(function(W,N){var k=c.keys[N];return k===void 0&&(c.keys[N]=c.id,k=c.keys[N],c.id+=1),{name:N,key:k,isListField:!0}}),$,m)})))};function gn(n,r){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,t,a,o,s=[],u=!0,l=!1;try{if(a=(e=e.call(n)).next,r===0){if(Object(e)!==e)return;u=!1}else for(;!(u=(i=a.call(e)).done)&&(s.push(i.value),s.length!==r);u=!0);}catch(f){l=!0,t=f}finally{try{if(!u&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(l)throw t}}return s}}function Pe(n,r){return zr(n)||gn(n,r)||ur(n,r)||Kr()}function vn(n){var r=!1,e=n.length,i=[];return n.length?new Promise(function(t,a){n.forEach(function(o,s){o.catch(function(u){return r=!0,u}).then(function(u){e-=1,i[s]=u,!(e>0)&&(r&&a(i),t(i))})})}):Promise.resolve([])}var Zr="__@field_split__";function Ge(n){return n.map(function(r){return"".concat(Q(r),":").concat(r)}).join(Zr)}var he=function(){function n(){lr(this,n),this.kvs=new Map}return fr(n,[{key:"set",value:function(e,i){this.kvs.set(Ge(e),i)}},{key:"get",value:function(e){return this.kvs.get(Ge(e))}},{key:"update",value:function(e,i){var t=this.get(e),a=i(t);a?this.set(e,a):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Ge(e))}},{key:"map",value:function(e){return _(this.kvs.entries()).map(function(i){var t=Pe(i,2),a=t[0],o=t[1],s=a.split(Zr);return e({key:s.map(function(u){var l=u.match(/^([^:]*):(.*)$/),f=Pe(l,3),c=f[1],p=f[2];return c==="number"?Number(p):p}),value:o})})}},{key:"toJSON",value:function(){var e={};return this.map(function(i){var t=i.key,a=i.value;return e[t.join(".")]=a,null}),e}}]),n}(),yn=["name"],Fn=fr(function n(r){var e=this;lr(this,n),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:e.getFieldValue,getFieldsValue:e.getFieldsValue,getFieldError:e.getFieldError,getFieldWarning:e.getFieldWarning,getFieldsError:e.getFieldsError,isFieldsTouched:e.isFieldsTouched,isFieldTouched:e.isFieldTouched,isFieldValidating:e.isFieldValidating,isFieldsValidating:e.isFieldsValidating,resetFields:e.resetFields,setFields:e.setFields,setFieldValue:e.setFieldValue,setFieldsValue:e.setFieldsValue,validateFields:e.validateFields,submit:e.submit,_init:!0,getInternalHooks:e.getInternalHooks}},this.getInternalHooks=function(i){return i===fe?(e.formHooked=!0,{dispatch:e.dispatch,initEntityValue:e.initEntityValue,registerField:e.registerField,useSubscribe:e.useSubscribe,setInitialValues:e.setInitialValues,destroyForm:e.destroyForm,setCallbacks:e.setCallbacks,setValidateMessages:e.setValidateMessages,getFields:e.getFields,setPreserve:e.setPreserve,getInitialValue:e.getInitialValue,registerWatch:e.registerWatch}):(ie(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(i){e.subscribable=i},this.prevWithoutPreserves=null,this.setInitialValues=function(i,t){if(e.initialValues=i||{},t){var a,o=ve(i,e.store);(a=e.prevWithoutPreserves)===null||a===void 0||a.map(function(s){var u=s.key;o=te(o,u,ne(i,u))}),e.prevWithoutPreserves=null,e.updateStore(o)}},this.destroyForm=function(){var i=new he;e.getFieldEntities(!0).forEach(function(t){e.isMergedPreserve(t.isPreserve())||i.set(t.getNamePath(),!0)}),e.prevWithoutPreserves=i},this.getInitialValue=function(i){var t=ne(e.initialValues,i);return i.length?ve(t):t},this.setCallbacks=function(i){e.callbacks=i},this.setValidateMessages=function(i){e.validateMessages=i},this.setPreserve=function(i){e.preserve=i},this.watchList=[],this.registerWatch=function(i){return e.watchList.push(i),function(){e.watchList=e.watchList.filter(function(t){return t!==i})}},this.notifyWatch=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(e.watchList.length){var t=e.getFieldsValue(),a=e.getFieldsValue(!0);e.watchList.forEach(function(o){o(t,a,i)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(i){e.store=i},this.getFieldEntities=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?e.fieldEntities.filter(function(t){return t.getNamePath().length}):e.fieldEntities},this.getFieldsMap=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=new he;return e.getFieldEntities(i).forEach(function(a){var o=a.getNamePath();t.set(o,a)}),t},this.getFieldEntitiesForNamePathList=function(i){if(!i)return e.getFieldEntities(!0);var t=e.getFieldsMap(!0);return i.map(function(a){var o=H(a);return t.get(o)||{INVALIDATE_NAME_PATH:H(a)}})},this.getFieldsValue=function(i,t){if(e.warningUnhooked(),i===!0&&!t)return e.store;var a=e.getFieldEntitiesForNamePathList(Array.isArray(i)?i:null),o=[];return a.forEach(function(s){var u,l="INVALIDATE_NAME_PATH"in s?s.INVALIDATE_NAME_PATH:s.getNamePath();if(!(!i&&(!((u=s.isListField)===null||u===void 0)&&u.call(s))))if(!t)o.push(l);else{var f="getMeta"in s?s.getMeta():null;t(f)&&o.push(l)}}),Nr(e.store,o.map(H))},this.getFieldValue=function(i){e.warningUnhooked();var t=H(i);return ne(e.store,t)},this.getFieldsError=function(i){e.warningUnhooked();var t=e.getFieldEntitiesForNamePathList(i);return t.map(function(a,o){return a&&!("INVALIDATE_NAME_PATH"in a)?{name:a.getNamePath(),errors:a.getErrors(),warnings:a.getWarnings()}:{name:H(i[o]),errors:[],warnings:[]}})},this.getFieldError=function(i){e.warningUnhooked();var t=H(i),a=e.getFieldsError([t])[0];return a.errors},this.getFieldWarning=function(i){e.warningUnhooked();var t=H(i),a=e.getFieldsError([t])[0];return a.warnings},this.isFieldsTouched=function(){e.warningUnhooked();for(var i=arguments.length,t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];var o=t[0],s=t[1],u,l=!1;t.length===0?u=null:t.length===1?Array.isArray(o)?(u=o.map(H),l=!1):(u=null,l=o):(u=o.map(H),l=s);var f=e.getFieldEntities(!0),c=function(y){return y.isFieldTouched()};if(!u)return l?f.every(c):f.some(c);var p=new he;u.forEach(function(v){p.set(v,[])}),f.forEach(function(v){var y=v.getNamePath();u.forEach(function(m){m.every(function(w,F){return y[F]===w})&&p.update(m,function(w){return[].concat(_(w),[v])})})});var b=function(y){return y.some(c)},P=p.map(function(v){var y=v.value;return y});return l?P.every(b):P.some(b)},this.isFieldTouched=function(i){return e.warningUnhooked(),e.isFieldsTouched([i])},this.isFieldsValidating=function(i){e.warningUnhooked();var t=e.getFieldEntities();if(!i)return t.some(function(o){return o.isFieldValidating()});var a=i.map(H);return t.some(function(o){var s=o.getNamePath();return Fe(a,s)&&o.isFieldValidating()})},this.isFieldValidating=function(i){return e.warningUnhooked(),e.isFieldsValidating([i])},this.resetWithFieldInitialValue=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=new he,a=e.getFieldEntities(!0);a.forEach(function(u){var l=u.props.initialValue,f=u.getNamePath();if(l!==void 0){var c=t.get(f)||new Set;c.add({entity:u,value:l}),t.set(f,c)}});var o=function(l){l.forEach(function(f){var c=f.props.initialValue;if(c!==void 0){var p=f.getNamePath(),b=e.getInitialValue(p);if(b!==void 0)ie(!1,"Form already set 'initialValues' with path '".concat(p.join("."),"'. Field can not overwrite it."));else{var P=t.get(p);if(P&&P.size>1)ie(!1,"Multiple Field with path '".concat(p.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(P){var v=e.getFieldValue(p);(!i.skipExist||v===void 0)&&e.updateStore(te(e.store,p,_(P)[0].value))}}}})},s;i.entities?s=i.entities:i.namePathList?(s=[],i.namePathList.forEach(function(u){var l=t.get(u);if(l){var f;(f=s).push.apply(f,_(_(l).map(function(c){return c.entity})))}})):s=a,o(s)},this.resetFields=function(i){e.warningUnhooked();var t=e.store;if(!i){e.updateStore(ve(e.initialValues)),e.resetWithFieldInitialValue(),e.notifyObservers(t,null,{type:"reset"}),e.notifyWatch();return}var a=i.map(H);a.forEach(function(o){var s=e.getInitialValue(o);e.updateStore(te(e.store,o,s))}),e.resetWithFieldInitialValue({namePathList:a}),e.notifyObservers(t,a,{type:"reset"}),e.notifyWatch(a)},this.setFields=function(i){e.warningUnhooked();var t=e.store,a=[];i.forEach(function(o){var s=o.name,u=sr(o,yn),l=H(s);a.push(l),"value"in u&&e.updateStore(te(e.store,l,u.value)),e.notifyObservers(t,[l],{type:"setField",data:o})}),e.notifyWatch(a)},this.getFields=function(){var i=e.getFieldEntities(!0),t=i.map(function(a){var o=a.getNamePath(),s=a.getMeta(),u=M(M({},s),{},{name:o,value:e.getFieldValue(o)});return Object.defineProperty(u,"originRCField",{value:!0}),u});return t},this.initEntityValue=function(i){var t=i.props.initialValue;if(t!==void 0){var a=i.getNamePath(),o=ne(e.store,a);o===void 0&&e.updateStore(te(e.store,a,t))}},this.isMergedPreserve=function(i){var t=i!==void 0?i:e.preserve;return t??!0},this.registerField=function(i){e.fieldEntities.push(i);var t=i.getNamePath();if(e.notifyWatch([t]),i.props.initialValue!==void 0){var a=e.store;e.resetWithFieldInitialValue({entities:[i],skipExist:!0}),e.notifyObservers(a,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e.fieldEntities=e.fieldEntities.filter(function(c){return c!==i}),!e.isMergedPreserve(s)&&(!o||u.length>1)){var l=o?void 0:e.getInitialValue(t);if(t.length&&e.getFieldValue(t)!==l&&e.fieldEntities.every(function(c){return!Br(c.getNamePath(),t)})){var f=e.store;e.updateStore(te(f,t,l,!0)),e.notifyObservers(f,[t],{type:"remove"}),e.triggerDependenciesUpdate(f,t)}}e.notifyWatch([t])}},this.dispatch=function(i){switch(i.type){case"updateValue":{var t=i.namePath,a=i.value;e.updateValue(t,a);break}case"validateField":{var o=i.namePath,s=i.triggerName;e.validateFields([o],{triggerName:s});break}}},this.notifyObservers=function(i,t,a){if(e.subscribable){var o=M(M({},a),{},{store:e.getFieldsValue(!0)});e.getFieldEntities().forEach(function(s){var u=s.onStoreChange;u(i,t,o)})}else e.forceRootUpdate()},this.triggerDependenciesUpdate=function(i,t){var a=e.getDependencyChildrenFields(t);return a.length&&e.validateFields(a),e.notifyObservers(i,a,{type:"dependenciesUpdate",relatedFields:[t].concat(_(a))}),a},this.updateValue=function(i,t){var a=H(i),o=e.store;e.updateStore(te(e.store,a,t)),e.notifyObservers(o,[a],{type:"valueUpdate",source:"internal"}),e.notifyWatch([a]);var s=e.triggerDependenciesUpdate(o,a),u=e.callbacks.onValuesChange;if(u){var l=Nr(e.store,[a]);u(l,e.getFieldsValue())}e.triggerOnFieldsChange([a].concat(_(s)))},this.setFieldsValue=function(i){e.warningUnhooked();var t=e.store;if(i){var a=ve(e.store,i);e.updateStore(a)}e.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),e.notifyWatch()},this.setFieldValue=function(i,t){e.setFields([{name:i,value:t}])},this.getDependencyChildrenFields=function(i){var t=new Set,a=[],o=new he;e.getFieldEntities().forEach(function(u){var l=u.props.dependencies;(l||[]).forEach(function(f){var c=H(f);o.update(c,function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return p.add(u),p})})});var s=function u(l){var f=o.get(l)||new Set;f.forEach(function(c){if(!t.has(c)){t.add(c);var p=c.getNamePath();c.isFieldDirty()&&p.length&&(a.push(p),u(p))}})};return s(i),a},this.triggerOnFieldsChange=function(i,t){var a=e.callbacks.onFieldsChange;if(a){var o=e.getFields();if(t){var s=new he;t.forEach(function(l){var f=l.name,c=l.errors;s.set(f,c)}),o.forEach(function(l){l.errors=s.get(l.name)||l.errors})}var u=o.filter(function(l){var f=l.name;return Fe(i,f)});a(u,o)}},this.validateFields=function(i,t){e.warningUnhooked();var a,o;Array.isArray(i)||typeof i=="string"||typeof t=="string"?(a=i,o=t):o=i;var s=!!a,u=s?a.map(H):[],l=[];e.getFieldEntities(!0).forEach(function(p){var b;if(s||u.push(p.getNamePath()),!((b=o)===null||b===void 0)&&b.recursive&&s){var P=p.getNamePath();P.every(function(m,w){return a[w]===m||a[w]===void 0})&&u.push(P)}if(!(!p.props.rules||!p.props.rules.length)){var v=p.getNamePath();if(!s||Fe(u,v)){var y=p.validateRules(M({validateMessages:M(M({},Gr),e.validateMessages)},o));l.push(y.then(function(){return{name:v,errors:[],warnings:[]}}).catch(function(m){var w,F=[],E=[];return(w=m.forEach)===null||w===void 0||w.call(m,function(R){var O=R.rule.warningOnly,$=R.errors;O?E.push.apply(E,_($)):F.push.apply(F,_($))}),F.length?Promise.reject({name:v,errors:F,warnings:E}):{name:v,errors:F,warnings:E}}))}}});var f=vn(l);e.lastValidatePromise=f,f.catch(function(p){return p}).then(function(p){var b=p.map(function(P){var v=P.name;return v});e.notifyObservers(e.store,b,{type:"validateFinish"}),e.triggerOnFieldsChange(b,p)});var c=f.then(function(){return e.lastValidatePromise===f?Promise.resolve(e.getFieldsValue(u)):Promise.reject([])}).catch(function(p){var b=p.filter(function(P){return P&&P.errors.length});return Promise.reject({values:e.getFieldsValue(u),errorFields:b,outOfDate:e.lastValidatePromise!==f})});return c.catch(function(p){return p}),e.triggerOnFieldsChange(u),c},this.submit=function(){e.warningUnhooked(),e.validateFields().then(function(i){var t=e.callbacks.onFinish;if(t)try{t(i)}catch(a){console.error(a)}}).catch(function(i){var t=e.callbacks.onFinishFailed;t&&t(i)})},this.forceRootUpdate=r});function gr(n){var r=S.useRef(),e=S.useState({}),i=Pe(e,2),t=i[1];if(!r.current)if(n)r.current=n;else{var a=function(){t({})},o=new Fn(a);r.current=o.getForm()}return[r.current]}var or=S.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),bn=function(r){var e=r.validateMessages,i=r.onFormChange,t=r.onFormFinish,a=r.children,o=S.useContext(or),s=S.useRef({});return S.createElement(or.Provider,{value:M(M({},o),{},{validateMessages:M(M({},o.validateMessages),e),triggerFormChange:function(l,f){i&&i(l,{changedFields:f,forms:s.current}),o.triggerFormChange(l,f)},triggerFormFinish:function(l,f){t&&t(l,{values:f,forms:s.current}),o.triggerFormFinish(l,f)},registerForm:function(l,f){l&&(s.current=M(M({},s.current),{},be({},l,f))),o.registerForm(l,f)},unregisterForm:function(l){var f=M({},s.current);delete f[l],s.current=f,o.unregisterForm(l)}})},a)},wn=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Pn=function(r,e){var i=r.name,t=r.initialValues,a=r.fields,o=r.form,s=r.preserve,u=r.children,l=r.component,f=l===void 0?"form":l,c=r.validateMessages,p=r.validateTrigger,b=p===void 0?"onChange":p,P=r.onValuesChange,v=r.onFieldsChange,y=r.onFinish,m=r.onFinishFailed,w=sr(r,wn),F=S.useContext(or),E=gr(o),R=Pe(E,1),O=R[0],$=O.getInternalHooks(fe),I=$.useSubscribe,W=$.setInitialValues,N=$.setCallbacks,k=$.setValidateMessages,h=$.setPreserve,d=$.destroyForm;S.useImperativeHandle(e,function(){return O}),S.useEffect(function(){return F.registerForm(i,O),function(){F.unregisterForm(i)}},[F,O,i]),k(M(M({},F.validateMessages),c)),N({onValuesChange:P,onFieldsChange:function(T){if(F.triggerFormChange(i,T),v){for(var B=arguments.length,se=new Array(B>1?B-1:0),le=1;le<B;le++)se[le-1]=arguments[le];v.apply(void 0,[T].concat(se))}},onFinish:function(T){F.triggerFormFinish(i,T),y&&y(T)},onFinishFailed:m}),h(s);var g=S.useRef(null);W(t,!g.current),g.current||(g.current=!0),S.useEffect(function(){return d},[]);var x,j=typeof u=="function";if(j){var C=O.getFieldsValue(!0);x=u(C,O)}else x=u;I(!j);var L=S.useRef();S.useEffect(function(){hn(L.current||[],a||[])||O.setFields(a||[]),L.current=a},[a,O]);var D=S.useMemo(function(){return M(M({},O),{},{validateTrigger:b})},[O,b]),z=S.createElement(Re.Provider,{value:null},S.createElement(pe.Provider,{value:D},x));return f===!1?z:S.createElement(f,_r({},w,{onSubmit:function(T){T.preventDefault(),T.stopPropagation(),O.submit()},onReset:function(T){var B;T.preventDefault(),O.resetFields(),(B=w.onReset)===null||B===void 0||B.call(w,T)}}),z)};function Tr(n){try{return JSON.stringify(n)}catch{return Math.random()}}function En(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];var i=r[0],t=i===void 0?[]:i,a=r[1],o=a===void 0?{}:a,s=Ot(o)?{form:o}:o,u=s.form,l=S.useState(),f=Pe(l,2),c=f[0],p=f[1],b=S.useMemo(function(){return Tr(c)},[c]),P=S.useRef(b);P.current=b;var v=S.useContext(pe),y=u||v,m=y&&y._init,w=H(t),F=S.useRef(w);return F.current=w,S.useEffect(function(){if(m){var E=y.getFieldsValue,R=y.getInternalHooks,O=R(fe),$=O.registerWatch,I=$(function(N,k){var h=ne(s.preserve?k:N,F.current),d=Tr(h);P.current!==d&&(P.current=d,p(h))}),W=ne(s.preserve?E(!0):E(),F.current);return p(W),I}},[m]),c}var xn=S.forwardRef(Pn),me=xn;me.FormProvider=bn;me.Field=mr;me.List=Jr;me.useForm=gr;me.useWatch=En;const Vn={layout:"horizontal",colon:!1,showValidateMessage:!0},vr=ue.createContext(Vn),Xr=S.forwardRef((n,r)=>{const{prefixCls:e,createNamespace:i}=S.useContext(Mr),[t]=i("form",e),{className:a,style:o,layout:s,footer:u,children:l,border:f,inset:c,colon:p,showValidateMessage:b,...P}=n;return V.jsx(vr.Provider,{value:{layout:s,colon:p,showValidateMessage:b,validateTrigger:P.validateTrigger},children:V.jsxs(me,{className:ze(t(),a),style:o,ref:r,...P,children:[V.jsx(tt,{border:f,inset:c,children:l}),u&&V.jsx("div",{className:ze(t("footer")),children:u})]})})});Xr.defaultProps={showValidateMessage:!0,validateTrigger:"onChange"};const On=Xr,jn=ue.memo(({children:n,...r})=>ue.cloneElement(n,r),(n,r)=>n.value===r.value&&n.update===r.update),Cn=n=>{const{className:r,meta:e,children:i,isFieldChildren:t,showValidateMessage:a,colon:o,layout:s,validateTrigger:u,...l}=n,{prefixCls:f,createNamespace:c}=S.useContext(Mr),[p]=c("form",f),b=S.useContext(vr),P=s??b.layout,v=o??b.colon,y=u??b.validateTrigger,m=a??b.showValidateMessage,w=e&&e.errors.length>0,F=m&&w?e.errors[0]:null,E={...l,className:ze(p({vertical:P==="vertical"&&!t}),r),colon:v,error:w,errorMessage:F,validateTrigger:y};return t?ue.cloneElement(i,E):V.jsx(ae,{...E,children:i})},Sn=n=>{var x;const{className:r,style:e,label:i,name:t,required:a,noStyle:o,tooltip:s,intro:u,customField:l,disabled:f,colon:c,rules:p,children:b,messageVariables:P,trigger:v,validateTrigger:y=v,onClick:m,shouldUpdate:w,dependencies:F,labelWidth:E,labelAlign:R,labelClass:O,showValidateMessage:$,...I}=n,{validateTrigger:W}=S.useContext(vr),N=y!==void 0?y:W,k=S.useRef(0);k.current+=1;const h=((x=b.type)==null?void 0:x[at])===nt||l;function d(j,C,L,D){return o?j:V.jsx(Cn,{isFieldChildren:h,className:r,style:e,label:i,tooltip:s,intro:u,required:D,disabled:f,htmlFor:C,meta:L,colon:c,labelWidth:E,labelAlign:R,labelClass:O,showValidateMessage:$,onClick:m,children:j})}const g=typeof b=="function";return!t&&!g&&!n.dependencies?d(b):V.jsx(mr,{...I,name:t,shouldUpdate:w,dependencies:F,rules:p,trigger:v,validateTrigger:N,children:(j,C,L)=>{let D=null;const z=a!==void 0?a:!!(p&&p.some(T=>!!(T&&typeof T=="object"&&T.required))),J=(We(t).length&&C?C.name:[]).join("_");if(g)(w||F)&&!t&&(D=b(L));else if(!(F&&!t))if(ue.isValidElement(b)){const T={...b.props,...j};T.id||(T.id=J),f&&(T.disabled=f),new Set([...We(Object.keys(b.props).filter(se=>se.indexOf("on")===0)),...We(N)]).forEach(se=>{T[se]=(...le)=>{var yr,Fr,br;(yr=j[se])==null||yr.call(j,...le),(br=(Fr=b.props)[se])==null||br.call(Fr,...le)}}),D=V.jsx(jn,{value:j[n.valuePropName||"value"],update:k.current,children:ue.cloneElement(b,T)}),h&&(T.value=T.value||"",D=ue.cloneElement(b,T))}else D=b;return d(D,J,C,z)}})},Rn=Sn,$n=Object.assign(On,{Item:Rn,useForm:gr,List:Jr}),G=$n;const Ci=()=>{const{DemoBlock:n,DemoSection:r}=Qr,[e]=G.useForm(),i=t=>{console.log(t)};return V.jsxs(r,{children:[V.jsx(n,{title:"基础用法",children:V.jsxs(G,{showValidateMessage:!1,onFinish:i,footer:V.jsx("div",{style:{margin:"16px 16px 0"},children:V.jsx(xe,{round:!0,nativeType:"submit",type:"primary",block:!0,children:"提交"})}),children:[V.jsx(G.Item,{tooltip:{message:"A prime is a natural number greater than 1 that has no positive divisors other than 1 and itself."},intro:"确保这是唯一的用户名",rules:[{required:!0,message:"请填写用户名"}],name:"username",label:"用户名",children:V.jsx(ae,{placeholder:"请输入用户名"})}),V.jsx(G.Item,{rules:[{required:!0,message:"请填写密码"}],name:"password",label:"密码",children:V.jsx(ae,{placeholder:"请输入密码"})})]})}),V.jsx(n,{title:"校验规则-触发时机onSubmit",children:V.jsxs(G,{onFinish:i,validateTrigger:"onSubmit",footer:V.jsx("div",{style:{margin:"16px 16px 0"},children:V.jsx(xe,{round:!0,nativeType:"submit",type:"primary",block:!0,children:"提交"})}),children:[V.jsx(G.Item,{name:"text1",label:"正则校验",rules:[{pattern:/\d{6}/,message:"请输入6位数字"}],children:V.jsx(ae,{placeholder:"正则校验"})}),V.jsx(G.Item,{name:"text2",label:"函数校验",rules:[{validator:(t,a)=>/1\d{10}/.test(a)?Promise.resolve(!0):Promise.reject(new Error("请输入正确的手机号码"))}],children:V.jsx(ae,{placeholder:"函数校验"})}),V.jsx(G.Item,{label:"异步函数校验",name:"text3",rules:[{validator:(t,a)=>new Promise((o,s)=>{Ve.loading("验证中..."),setTimeout(()=>{/\d{6}/.test(a)?o(!0):s(new Error("请输入正确内容")),Ve.clear()},1e3)})}],children:V.jsx(ae,{placeholder:"异步函数校验"})})]})}),V.jsx(n,{title:"校验规则-触发时机onChange",children:V.jsxs(G,{onFinish:i,footer:V.jsx("div",{style:{margin:"16px 16px 0"},children:V.jsx(xe,{round:!0,nativeType:"submit",type:"primary",block:!0,children:"提交"})}),children:[V.jsx(G.Item,{name:"text1",label:"正则校验2",rules:[{pattern:/\d{6}/,message:"请输入6位数字"}],children:V.jsx(ae,{placeholder:"正则校验"})}),V.jsx(G.Item,{name:"text2",label:"函数校验",rules:[{validator:(t,a)=>/1\d{10}/.test(a)?Promise.resolve(!0):Promise.reject(new Error("请输入正确的手机号码"))}],children:V.jsx(ae,{placeholder:"函数校验"})}),V.jsx(G.Item,{label:"异步函数校验",name:"text3",rules:[{validator:(t,a)=>new Promise((o,s)=>{Ve.loading("验证中..."),setTimeout(()=>{/\d{6}/.test(a)?o(!0):s(new Error("请输入正确内容")),Ve.clear()},1e3)})}],children:V.jsx(ae,{placeholder:"异步函数校验"})})]})}),V.jsx(n,{title:"表单类型",children:V.jsxs(G,{inset:!0,form:e,onFinish:i,footer:V.jsx("div",{style:{margin:"16px 16px 0"},children:V.jsx(xe,{round:!0,nativeType:"submit",type:"primary",block:!0,children:"提交"})}),children:[V.jsx(G.Item,{name:"switch",label:"开关",valuePropName:"checked",children:V.jsx(ot,{size:20})}),V.jsx(G.Item,{name:"checkbox",label:"复选框",valuePropName:"checked",children:V.jsx(Oe,{shape:"square"})}),V.jsx(G.Item,{name:"checkbox_group",label:"复选框组",children:V.jsxs(Oe.Group,{direction:"horizontal",children:[V.jsx(Oe,{shape:"square",name:"c1",children:"复选框1"}),V.jsx(Oe,{shape:"square",name:"c2",children:"复选框2"})]})}),V.jsx(G.Item,{name:"radio",label:"单选框",initialValue:"r1",children:V.jsxs(De.Group,{direction:"horizontal",children:[V.jsx(De,{name:"r1",children:"单选框1"}),V.jsx(De,{name:"r2",children:"单选框2"})]})}),V.jsx(G.Item,{name:"rate",label:"评分",initialValue:3,children:V.jsx(st,{})}),V.jsx(G.Item,{name:"uploader",label:"上传文件",rules:[{required:!0,message:"请选择文件"}],initialValue:[{url:"https://img.yzcdn.cn/vant/sand.jpg",status:"done",name:"图片名称"}],children:V.jsx(it,{})}),V.jsx(G.Item,{name:"textarea",label:"详细地址",children:V.jsx(ae,{rows:3,autosize:!0,type:"textarea",maxlength:140,showWordLimit:!0})})]})})]})};export{Ci as default};
