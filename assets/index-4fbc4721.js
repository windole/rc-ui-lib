import{j as t,c as I}from"./locales-548059eb.js";import{r as e}from"./react-libs-840bfe49.js";import{c as G}from"./rc-cli_site-mobile-demo-eaa39090.js";import{C as $}from"./ConfigProviderContext-0f984393.js";import{a as A}from"./unit-bb3e6514.js";import{r as U}from"./raf-f0838b14.js";import{p as w}from"./string-4e3cebce.js";import{a as v}from"./index-9cdb6f61.js";import{G as b}from"./index-6e984e37.js";import"./mobile-e0307386.js";import"./base-1da74170.js";import"./index-59db7e48.js";import"./Loading-c60598b2.js";import"./constant-7552c2aa.js";const E=({direction:s,figureArr:a,isStart:j,height:r,duration:l,delay:i})=>{const{prefixCls:c,createNamespace:x}=e.useContext($),[d]=x("rolling-text-item",c),p=e.useMemo(()=>s==="down"?a.slice().reverse():a,[s,a]),m=e.useMemo(()=>`-${r*(a.length-1)}px`,[r,a]),y=e.useMemo(()=>({lineHeight:A(r)}),[r]),S=e.useMemo(()=>({height:A(r),"--rc-translate":m,"--rc-duration":`${l}s`,"--rc-delay":`${i}s`}),[l,i,m]);return t.jsx("div",{className:I(d([s])),style:S,children:t.jsx("div",{className:I(d("box",{animate:j})),children:Array.isArray(p)&&p.map((N,f)=>t.jsx("div",{className:I(d("item")),style:y,children:N},String(f)))})})};E.defaultProps={duration:2,direction:"down",height:40};const _=E,Z=2,H=e.forwardRef(({duration:s,direction:a,height:j,textList:r,startNum:l,targetNum:i,autoStart:c,...x},d)=>{const{prefixCls:p,createNamespace:m}=e.useContext($),[y]=m("rolling-text",p),[S,N]=e.useState(c),f=e.useMemo(()=>Array.isArray(r)&&r.length,[r]),g=e.useMemo(()=>f?r[0].length:`${Math.max(l,i)}`.length,[l,i]),O=u=>{const o=[];for(let C=0;C<r.length;C++)o.push(r[C][u]);return o},k=e.useMemo(()=>f?new Array(g).fill(""):w(i,g).split(""),[f,g,i]),P=e.useMemo(()=>w(l,g).split(""),[l,g]),B=u=>{const o=+P[u],C=+k[u],T=[];for(let n=o;n<=9;n++)T.push(n);for(let n=0;n<=Z;n++)for(let R=0;R<=9;R++)T.push(R);for(let n=0;n<=C;n++)T.push(n);return T},D=(u,o)=>x.stopOrder==="ltr"?.2*u:.2*(o-1-u),M=()=>{N(!0)},F=()=>{N(!1),c&&U(()=>M())};return e.useEffect(()=>{c&&M()},[c]),e.useImperativeHandle(d,()=>({start:M,reset:F})),t.jsx("div",{className:I(y(""),x.className),children:k.map((u,o)=>t.jsx(_,{figureArr:f?O(o):B(o),duration:s,direction:a,isStart:S,height:j,delay:D(o,g)},String(o)))})});H.defaultProps={height:40,startNum:0,textList:[],duration:2,autoStart:!0,direction:"down",stopOrder:"ltr"};const h=H;const q=["aaaaa","bbbbb","ccccc","ddddd","eeeee","fffff","ggggg"],nt=()=>{const{DemoBlock:s,DemoSection:a}=G,[j,r]=e.useState(!1),[l,i]=e.useState(!1),[c,x]=e.useState(!1),[d,p]=e.useState(!1),m=e.useRef(),y=()=>{m.current.start()},S=()=>{m.current.reset()};return t.jsxs(a,{children:[t.jsxs(s,{card:!0,title:"基础用法",children:[t.jsx(h,{startNum:0,targetNum:123,autoStart:j}),t.jsx("div",{style:{marginTop:"10px"},children:t.jsx(v,{onClick:()=>r(!0),type:"primary",children:"向下翻滚"})})]}),t.jsxs(s,{card:!0,title:"设置翻滚方向",children:[t.jsx(h,{startNum:0,targetNum:432,direction:"up",autoStart:l}),t.jsx("div",{style:{marginTop:"10px"},children:t.jsx(v,{onClick:()=>i(!0),type:"primary",children:"向上翻滚"})})]}),t.jsxs(s,{card:!0,title:"设置各数位停止顺序",children:[t.jsx(h,{startNum:0,targetNum:54321,autoStart:c,stopOrder:"rtl"}),t.jsx("div",{style:{marginTop:"10px"},children:t.jsx(v,{onClick:()=>x(!0),type:"primary",children:"翻滚"})})]}),t.jsxs(s,{card:!0,title:"翻转非数字内容",children:[t.jsx(h,{textList:q,autoStart:d,stopOrder:"rtl"}),t.jsx("div",{style:{marginTop:"10px"},children:t.jsx(v,{onClick:()=>p(!0),type:"primary",children:"翻滚"})})]}),t.jsx(s,{card:!0,title:"自定义样式",children:t.jsx(h,{className:"my-rolling-text",startNum:12345,targetNum:54321,height:54})}),t.jsxs(s,{card:!0,title:"手动控制",children:[t.jsx(h,{ref:m,className:"my-rolling-text",startNum:12345,targetNum:54321,autoStart:!1,height:54}),t.jsxs(b,{columnNum:2,style:{marginTop:"10px"},children:[t.jsx(b.Item,{icon:"play-circle-o",text:"开始",onClick:y}),t.jsx(b.Item,{icon:"replay",text:"重置",onClick:S})]})]})]})};export{nt as default};
