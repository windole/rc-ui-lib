import{j as b,c as y}from"./locales-548059eb.js";import{r as s,R as v}from"./react-libs-840bfe49.js";import{u as G}from"./use-merged-state-79e14435.js";import{u as P}from"./use-refs-92151253.js";import{C as N}from"./ConfigProviderContext-0f984393.js";import{C as B}from"./Checker-351621d3.js";const O=s.createContext({}),R=O,j=s.forwardRef((e,h)=>{const{prefixCls:f,createNamespace:C}=s.useContext(N),[x]=C("checkbox-group",f),[d,r]=P(),[l,u]=G({value:e.value,defaultValue:e.defaultValue}),k=(c={})=>{typeof c=="boolean"&&(c={checked:c});const{checked:t,skipDisabled:n}=c,o=d.filter(a=>a.props.bindGroup?a.props.disabled&&n?a.checked:t??!a.checked:!1).map(a=>a.props.name);u(o),e.onChange(o)},i=c=>{var t;u(c),(t=e.onChange)==null||t.call(e,c)};return s.useImperativeHandle(h,()=>({toggleAll:k})),b.jsx(R.Provider,{value:{parent:{props:e},toggle:i,checked:l},children:b.jsx("div",{className:y(x([e.direction])),children:v.Children.toArray(e.children).filter(Boolean).map((c,t)=>{var n;return((n=c.type)==null?void 0:n.displayName)!=="Checkbox"?c:v.cloneElement(c,{ref:r(t)})})})})});j.defaultProps={defaultValue:[]};const E=j,g=s.forwardRef((e,h)=>{const{prefixCls:f,createNamespace:C}=s.useContext(N),[x]=C("checkbox",f),{parent:d,...r}=s.useContext(R),[l,u]=G({value:e.checked,defaultValue:e.defaultChecked}),k=t=>{const{name:n}=e,{max:m}=d.props,o=r.checked.slice();if(t)!(m&&o.length>=+m)&&o.indexOf(n)===-1&&(o.push(n),e.bindGroup&&r.toggle(o));else{const a=o.indexOf(n);a!==-1&&(o.splice(a,1),e.bindGroup&&r.toggle(o))}},i=s.useMemo(()=>d&&e.bindGroup?r.checked.indexOf(e.name)!==-1:l,[r.checked,l]),c=(t=!i)=>{var n;d&&e.bindGroup?k(t):(u(t),(n=e.onChange)==null||n.call(e,t))};return s.useImperativeHandle(h,()=>({toggle:c,checked:i,props:e})),b.jsx(B,{...e,bem:x,role:"checkbox",parent:d,checked:i,className:e.className,bindGroup:e.bindGroup,onToggle:c})});g.displayName="Checkbox";g.defaultProps={bindGroup:!0};const V=g,A=Object.assign(V,{Group:E}),$=A;export{A as C,$ as a};
