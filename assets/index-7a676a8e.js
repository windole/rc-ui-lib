import{j as o,c as l}from"./locales-548059eb.js";import{r as P}from"./react-libs-840bfe49.js";import{P as S,r as A}from"./Popup-a2a0dcda.js";import{a as E}from"./index-9cdb6f61.js";import{A as D}from"./index-cffeb12c.js";import{b as z,c as F}from"./constant-7552c2aa.js";import{C as I}from"./ConfigProviderContext-0f984393.js";import{a as $}from"./unit-bb3e6514.js";import{n as a}from"./base-1da74170.js";import{r as U,u as V}from"./render-38a34f7f.js";const L=e=>{const{prefixCls:u,createNamespace:r}=P.useContext(I),[n]=r("dialog",u),{width:x,title:t,theme:b,visible:T,message:B,className:v,messageAlign:s,closeOnClickOverlay:d,onClickCloseIcon:R,...O}=e,w=()=>e.title?o.jsx("div",{className:l(n("header",{isolated:!e.message&&!e.children})),children:t}):null,y=()=>e.children?o.jsx("div",{className:l(n("content")),children:e.children}):B?o.jsx("div",{className:l(n("content",{isolated:!t})),children:o.jsx("div",{className:l(n("message",{"has-title":t,[s]:s})),children:B})}):null,j=()=>{var f,C,g,c,i,m;return o.jsxs("div",{className:l(z,n("footer")),children:[e.showCancelButton&&o.jsx(E,{size:"large",text:e.cancelButtonText||"取消",className:l(n("cancel")),style:{color:e.cancelButtonColor},loading:(f=e.cancelProps)==null?void 0:f.loading,disabled:(C=e.cancelProps)==null?void 0:C.disabled,onClick:(g=e.cancelProps)!=null&&g.loading?a:e.onCancel}),e.showConfirmButton&&o.jsx(E,{size:"large",text:e.confirmButtonText||"确认",className:l(n("confirm"),{[F]:e.showCancelButton}),round:b==="round-button",style:{color:e.confirmButtonColor},loading:(c=e.confirmProps)==null?void 0:c.loading,disabled:(i=e.confirmProps)==null?void 0:i.disabled,onClick:(m=e.confirmProps)!=null&&m.loading?a:e.onConfirm})]})},k=()=>{var f,C,g,c,i,m;return o.jsxs(D,{className:l(n("footer")),children:[e.showCancelButton&&o.jsx(D.Button,{type:"warning",text:e.cancelButtonText||"取消",className:l(n("cancel")),color:e.cancelButtonColor,loading:(f=e.cancelProps)==null?void 0:f.loading,disabled:(C=e.cancelProps)==null?void 0:C.disabled,onClick:(g=e.cancelProps)!=null&&g.loading?a:e.onCancel}),e.showConfirmButton&&o.jsx(D.Button,{type:"danger",text:e.confirmButtonText||"确认",className:l(n("confirm")),color:e.confirmButtonColor,loading:(c=e.confirmProps)==null?void 0:c.loading,disabled:(i=e.confirmProps)==null?void 0:i.disabled,onClick:(m=e.confirmProps)!=null&&m.loading?a:e.onConfirm})]})},N=()=>e.footer?e.footer:e.theme==="round-button"?k():j();return o.jsxs(S,{...O,visible:T,className:l(n([b]),v),style:{width:$(x)},"aria-labelledby":t||B,closeOnClickOverlay:d,onOpen:e.onOpen,onOpened:e.onOpened,onClose:e.onClose,onClosed:e.onClosed,children:[w(),y(),N()]})};L.defaultProps={transition:"rc-dialog-bounce",showConfirmButton:!0,closeOnPopstate:!0};const _=L,h=_;h.show=e=>{const u={overlay:!0,closeable:!1,closeIcon:"cross",lockScroll:!0,transition:"rc-dialog-bounce",showConfirmButton:!0,showCancelButton:!1,closeOnClickOverlay:!1},{onClosed:r,onCancel:n=a,onConfirm:x=a,onClose:t=a,cancelProps:b,confirmProps:T,...B}=e,v=A(e.teleport),s=document.createElement("div");v.appendChild(s);let d=a;const R=()=>{const[O,w]=P.useState(!1),[y,j]=P.useState(!1),[k,N]=P.useState(!1);P.useEffect(()=>{w(!0)},[]),d=()=>{w(!1),t&&t()};const f=()=>{r&&r(),V(s)&&s.parentNode&&s.parentNode.removeChild(s)},C=async c=>{const i=setTimeout(()=>N(!0));await x(c)!==!1?(clearTimeout(i),d()):(clearTimeout(i),N(!1))},g=async(c,i)=>{if(i){d();return}const m=setTimeout(()=>j(!0));await n(c)!==!1?(clearTimeout(m),d()):(clearTimeout(m),j(!1))};return o.jsx(_,{...u,...B,visible:O,teleport:()=>s,cancelProps:{loading:y,...b},confirmProps:{loading:k,...T},onClose:d,onCancel:g,onConfirm:C,onClosed:f})};return U(o.jsx(R,{}),s),d};h.alert=e=>{const{onConfirm:u=a}=e;return new Promise(r=>{h.show({...e,onConfirm:n=>{u(n),r(n)}})})};h.confirm=e=>{const{onCancel:u=a,onConfirm:r=a}=e;return new Promise((n,x)=>{h.show({confirmButtonText:"确认",showCancelButton:!0,...e,onCancel:t=>{u(t),x()},onConfirm:t=>{r(t),n(!0)}})})};const Z=h;export{Z as D};
