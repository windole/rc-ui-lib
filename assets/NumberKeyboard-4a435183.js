import{j as t,c as l}from"./locales-548059eb.js";import{r as f}from"./react-libs-840bfe49.js";import{P as k}from"./Popup-a2a0dcda.js";import{C as D}from"./ConfigProviderContext-0f984393.js";import{L as S}from"./Loading-c60598b2.js";import{u as $}from"./use-touch-76dedc34.js";import{p as E}from"./event-07a78c2b.js";import{u as R}from"./use-click-away-fbf72a4b.js";const H=e=>{const r=Array(9).fill("").map((a,s)=>({text:s+1}));return e.randomKeyOrder&&r.sort(()=>Math.random()>.5?1:-1),r},_=e=>[...H(e),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],q=e=>{const r=H(e),{extraKey:a}=e,s=Array.isArray(a)?a:[a];return s.length===1?r.push({text:0,wider:!0},{text:s[0],type:"extra"}):s.length===2&&r.push({text:s[0],type:"extra"},{text:0},{text:s[1],type:"extra"}),r},L=e=>{const{type:r,text:a,color:s,wider:v,large:z,loading:d,onPress:g,children:y}=e,{prefixCls:K,createNamespace:N}=f.useContext(D),[c]=N("key",K),i=$(),[x,u]=f.useState(!1),b=t.jsx("svg",{className:l(c("collapse-icon")),viewBox:"0 0 30 24",children:t.jsx("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"})}),C=t.jsx("svg",{className:l(c("delete-icon")),viewBox:"0 0 32 22",children:t.jsx("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"})}),j=o=>{i.start(o),u(!0)},w=o=>{i.move(o),i.direction.current&&u(!1)},m=o=>{x&&(y||E(o),u(!1),g(String(a),r))},h=()=>{if(d)return t.jsx(S,{className:l(c("loading-icon"))});const o=y||a;switch(r){case"delete":return o||C;case"extra":return o||b;default:return o}};return t.jsx("div",{className:l(c("wrapper",{wider:v})),onTouchStart:j,onTouchMove:w,onTouchEnd:m,onTouchCancel:m,children:t.jsx("div",{role:"button",tabIndex:0,className:l(c([s,{large:z,active:x,delete:r==="delete"}])),children:h()})})};L.defaultProps={color:"",wider:!1,large:!1,loading:!1};const V=L,M=e=>{const{prefixCls:r,createNamespace:a}=f.useContext(D),[s]=a("number-keyboard",r),{visible:v,safeAreaInsetBottom:z,theme:d,blurOnClose:g,showDeleteKey:y,hideOnClickOutside:K,zIndex:N,teleport:c,title:i,closeButtonText:x,titleLeft:u}=e,b=f.useRef(null),C=x&&d==="default",j=!!(i||C||u),w=f.useMemo(()=>d==="custom"?q(e):_(e),[d]),m=()=>{var n;v&&((n=e.onBlur)==null||n.call(e))},h=()=>{var n;(n=e.onClose)==null||n.call(e),g&&m()},o=(n,B)=>{var T,A;if(n===""){B==="extra"&&m();return}B==="delete"?(T=e.onDelete)==null||T.call(e):B==="close"?h():(A=e.onInput)==null||A.call(e,n)},I=()=>j?t.jsxs("div",{className:l(s("header")),children:[u&&t.jsx("span",{className:l(s("title-left")),children:u}),i&&t.jsx("h2",{className:l(s("title")),children:i}),C&&t.jsx("button",{type:"button",className:l(s("close")),onClick:h,children:x})]}):null,O=()=>w.map(n=>t.jsx(V,{text:n.text,type:n.type,wider:n.wider,color:n.color,onPress:o},`${n.text}${n.type}`)),P=()=>d==="custom"?t.jsxs("div",{className:l(s("sidebar")),children:[y&&t.jsx(V,{large:!0,text:e.deleteButtonText,type:"delete",onPress:o}),t.jsx(V,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:o})]}):null;return R(b,m,"touchstart",K),t.jsx(k,{visible:v,preventDefaultMouseDown:!0,overlay:!1,round:j,zIndex:N,position:"bottom",duration:300,teleport:c,safeAreaInsetBottom:z,onClose:h,children:t.jsxs("div",{ref:b,className:l(s()),children:[I(),t.jsxs("div",{className:l(s("body")),children:[t.jsx("div",{className:l(s("keys")),children:O()}),P()]})]})})};M.defaultProps={theme:"default",visible:!1,extraKey:"",showDeleteKey:!0,zIndex:100,closeButtonLoading:!1,hideOnClickOutside:!0,randomKeyOrder:!1,safeAreaInsetBottom:!0,blurOnClose:!0};const Z=M;export{Z as N};
